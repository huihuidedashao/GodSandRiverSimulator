window.__require=function e(t,o,n){function r(i,c){if(!o[i]){if(!t[i]){var u=i.split("/");if(u=u[u.length-1],!t[u]){var l="function"==typeof __require&&__require;if(!c&&l)return l(u,!0);if(a)return a(u,!0);throw new Error("Cannot find module '"+i+"'")}i=u}var s=o[i]={exports:{}};t[i][0].call(s.exports,function(e){return r(t[i][1][e]||e)},s,s.exports,e,t,o,n)}return o[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({LogonScene:[function(e,t,o){"use strict";cc._RF.push(t,"4cd35pbpLRJU4SysNKayKr1","LogonScene");var n,r=e,a=o,i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),c=function(e,t,o,n){var r,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,o,i):r(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i},u=function(e,t,o,n){return new(o||(o=Promise))(function(r,a){function i(e){try{u(n.next(e))}catch(t){a(t)}}function c(e){try{u(n.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,c)}u((n=n.apply(e,t||[])).next())})},l=function(e,t){var o,n,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return u([e,t])}}function u(a){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(c){a=[6,c],n=0}finally{o=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(a,"__esModule",{value:!0}),a.LogonScene=void 0;var s=r("AdsManager"),f=(r("GameCommon"),r("LoadLayer")),p=r("LocalizedTextManager"),d=r("Constants"),y=r("SceneMgr"),h=(r("Http"),r("UiUtil")),g=r("UMReport"),_=r("AchievData"),b=r("RewardData"),v=r("UserData"),w=cc._decorator,m=w.ccclass,L=w.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadingPrefab=null,t.uiAtlas=null,t.APPID="1112233754",t.SECRET="7rXqRwLARZXJUXlQ",t}return i(t,e),t.prototype.start=function(){y.default.setSceneType(y.SCENE_TYPE.LOGON),this.addToast(),OS_IOS&&cc.game.setFrameRate(30),this.init().then(function(){y.default.enterGame(),s.default.showShareMenu()}),this.getLocation()},t.prototype.init=function(){return u(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return g.default.report("loadingStart"),f.LoadLayer.openLoading(),[4,p.LocalizedTextManager.loadLocalizedText()];case 1:return e.sent(),[4,v.default.loadConfig()];case 2:return e.sent(),s.default.init(),b.default.loadConfig(),_.default.loadConfig(),QQ_GAME&&this.logon(),[2]}})})},t.prototype.addToast=function(){h.UiUtil.openModule("res/prefab/Toast",d.default.GLOBAL_NODE)},t.prototype.logon=function(){var e=this,t=window.qq;t.login({success:function(o){console.log("\u767b\u9646\u6210\u529f\uff1a",o),o.code?t.request({url:"https://setting.1011games.com/api/httpProxy",method:"POST",data:{url:"https://api.q.qq.com/sns/jscode2session?appid="+e.APPID+"&secret="+e.SECRET+"&js_code="+o.code+"&grant_type=authorization_code",method:"GET",data:{}},success:function(e){if(e.data.status){var t=JSON.parse(e.data.data.result);console.log("\u83b7\u53d6openid\u6210\u529f\uff1a",t),v.default.member.openid=t.openid,v.default.member.session_key=t.session_key,v.default.save()}else console.log("\u6570\u636e\u8bf7\u6c42\u5931\u8d25\uff1a",e.data)}}):console.log("\u767b\u5f55\u5931\u8d25\uff01"+o.errMsg)}})},t.prototype.getLocation=function(){},c([L({type:cc.Prefab})],t.prototype,"loadingPrefab",void 0),c([L({type:cc.SpriteAtlas})],t.prototype,"uiAtlas",void 0),c([m],t)}(cc.Component);a.LogonScene=S,cc._RF.pop()},{}]},{},["LogonScene"]);