window.__require=function t(e,i,o){function n(r,a){if(!i[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var d=i[r]={exports:{}};e[r][0].call(d.exports,function(t){return n(e[r][1][t]||t)},d,d.exports,t,e,i,o)}return i[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<o.length;r++)n(o[r]);return n}({ANDROIDApi:[function(t,e){"use strict";cc._RF.push(e,"8e7e6rFKDRIg78zCT9ITRlO","ANDROIDApi"),window.JSApi={adSucess:function(){ANDROIDApi.adSucess()},adFail:function(){ANDROIDApi.adFail()}};var i="org/cocos2dx/javascript/AppActivity";window.ANDROIDApi={showToast:function(t){cc.sys.platform==cc.sys.ANDROID&&t&&jsb.reflection.callStaticMethod(i,"showToast","(Ljava/lang/String;)V",t)},showVideo:function(t){this.videocallback=t,this.jsCallJava(2)},showBanner:function(){this.jsCallJava(0)},showInsertAd:function(){this.jsCallJava(3)},hideBanner:function(){this.jsCallJava(1)},share:function(){this.jsCallJava(99)},saveToPhoto:function(t,e){cc.sys.platform==cc.sys.ANDROID&&jsb.reflection.callStaticMethod(i,"saveToPhoto","(Ljava/lang/String;Ljava/lang/String;)V",t,e)},adFail:function(){this.videocallback&&this.videocallback(-1)},adSucess:function(){this.videocallback&&this.videocallback(1)},jsCallJava:function(t){if(cc.sys.platform!=cc.sys.ANDROID)return this.adSucess();jsb.reflection.callStaticMethod(i,"adJni","(I)V",t)}},cc._RF.pop()},{}],AchievData:[function(t,e,i){"use strict";cc._RF.push(e,"ee4e4AUWeVIxqo3tN5wHyaz","AchievData");var o=t,n=i,s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.AchievConfig=n.Achiev=void 0;var r=o("EventDispatcher"),a=o("Constants"),c=o("ResMgr"),l=o("Tools"),d=function(){this.id=0,this.name="",this.order=0,this.rate=0,this.complete=!1,this.awarded=!1};n.Achiev=d,n.AchievConfig=function(){this.id=0,this.name="",this.icon="",this.order=0,this.hide=!1,this.desc="",this.onditions="",this.total=0,this.propID="",this.times=1};var h=a.default.OPEN_ACHIEV?"SANDBOX_ACHIEVE_KEY":"SANDBOX_ACHIEVE_KEY_TEMP",u=function(){function t(){this.config={},this._achievList={},this.dispatcher=new r.default,this.eventName="AchievementEvent",this.needSave=!1}return t.prototype.loadConfig=function(){c.default.loadRes("res/config/achievCfg",cc.JsonAsset).then(function(t){for(var e in t.json)if(Object.prototype.hasOwnProperty.call(t.json,e)){var i=t.json[e];this.config[i.id]=i,this._achievList[i.id]=l.default.fromJson(i,new d)}this.load()}.bind(this))},t.prototype.load=function(){var t=cc.sys.localStorage.getItem(h);if(t){var e=JSON.parse(t);for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(this._achievList[i]=e[i])}else this.save();setInterval(function(){this.needSave&&(cc.sys.localStorage.setItem(h,JSON.stringify(this._achievList)),this.needSave=!1)}.bind(this),1e3)},t.prototype.save=function(){(a.default.IS_LOCAL||a.default.OPEN_ACHIEV)&&(this.needSave=!0)},t.prototype.getAchievCount=function(){return Object.keys(this._achievList).length},t.prototype.getCompleteCount=function(){return this.getCompleteList(!0).length+this.getCompleteList(!1).length},t.prototype.getAchievByID=function(t){return this._achievList[t.toString()]},t.prototype.getConfigByID=function(t){return this.config[t.toString()]},t.prototype.getRecommendedList=function(){var t,e,i=Object.values(this._achievList);i.sort(function(t,e){return t.order-e.order});var o=this.getCompleteList(!1),n=0;try{for(var r=s(i),a=r.next();!a.done;a=r.next()){var c=a.value,l=this.getConfigByID(c.id);if(c.complete||l.hide||(o.push(c),n++),n>=5)break}}catch(u){t={error:u}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return o},t.prototype.getAchievingList=function(){var t,e,i=Object.values(this._achievList);i.sort(function(t,e){return t.order-e.order});var o=this.getCompleteList(!1);try{for(var n=s(i),r=n.next();!r.done;r=n.next()){var a=r.value,c=this.getConfigByID(a.id);a.complete||c.hide||o.push(a)}}catch(h){t={error:h}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return o},t.prototype.getCompleteList=function(t){var e,i,o=[],n=Object.values(this._achievList);n.sort(function(t,e){return t.order-e.order});try{for(var r=s(n),a=r.next();!a.done;a=r.next()){var c=a.value,l=this.getConfigByID(c.id);(t?c.complete&&c.awarded:c.complete&&!c.awarded&&!l.hide)&&o.push(c)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return o},t.prototype.update=function(t,e,i){if(void 0===e&&(e=1),void 0===i&&(i=!1),a.default.IS_LOCAL||a.default.OPEN_ACHIEV){var o=this.getAchievByID(t),n=this.getConfigByID(t);if(!o.complete){var s=o.rate;return o.rate=i?e:o.rate+e,o.rate>=n.total&&(o.rate=n.total,o.complete=!0,this.dispatcher.emit(this.eventName,o)),s!=o.rate&&this.save(),s!=o.rate}}return!1},t.prototype.award=function(t){var e=this.getAchievByID(t);return!(!e.complete||e.awarded||(e.awarded=!0,this.save(),this.dispatcher.emit(this.eventName,e),0))},t.prototype.isComplete=function(t){return this.getAchievByID(t).complete},t.inst=new t,t}();n.default=u.inst,cc._RF.pop()},{}],AdDeclare:[function(t,e,i){"use strict";cc._RF.push(e,"7f260bNqPxAjqtZiglZIv2h","AdDeclare");var o,n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.BannerType=n.AdInitConfig=n.AdResultState=n.NativeAdItemModel=n.PlatformName=void 0,function(t){t.OPPO="OPPO",t.QQ="QQ",t.TT="tt",t.VIVO="vivo",t.WeChat="WeChat",t.HuaWei="HuaWei",t.BaiDu="BaiDu",t.XiaoMi="XiaoMi",t.KuaiShou="KuaiShou",t.JSB_OPPO="JSB_OPPO",t.JSB_VIVO="JSB_VIVO",t.JSB_HUAWEI="JSB_HUAWEI",t.JSB_XIAOMI="JSB_XIAOMI",t.JSB_MMY="JSB_MMY",t.JSB_233="JSB_233",t.JSB_IOS="JSB_IOS",t.Dummy="Dummy"}(o=n.PlatformName||(n.PlatformName={}));var s=function(){function t(t){this.adId="",this.adPositionId="",this.title="",this.source="",this.desc="",this.iconUrl="",this.imgUrlList=[],this.logoUrl="",this.clickBtnTxt="",this.adPositionId=t}return t.prototype.init=function(t){this.adId=t.adId,this.title=t.title,this.desc=t.desc,this.source=t.source?t.source:"",this.iconUrl=t.icon,this.imgUrlList=t.imgUrlList,this.logoUrl=t.logoUrl,this.clickBtnTxt=t.clickBtnTxt,this.creativeType=t.creativeType,this.interactionType=t.interactionType},t}();n.NativeAdItemModel=s,function(t){t[t.ON_CLOSE_CANCEL=0]="ON_CLOSE_CANCEL",t[t.ON_CLOSE_FINISH=1]="ON_CLOSE_FINISH",t[t.ON_ERROR=2]="ON_ERROR",t[t.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(n.AdResultState||(n.AdResultState={})),n.AdInitConfig=function(){this.platformName=o.Dummy,this.gameId="",this.adSid="",this.bannerAdId=[],this.customAdId=[],this.boxBannerAdId=[],this.interstitialAdId=[],this.nativeAdId=[],this.rewardedVideoAdId=[],this.appBoxAdId=[]},function(t){t[t.NORMAL=0]="NORMAL",t[t.BOX=1]="BOX",t[t.NATIVE=2]="NATIVE"}(n.BannerType||(n.BannerType={})),cc._RF.pop()},{}],AdTools:[function(t,e,i){"use strict";cc._RF.push(e,"cf304OUV6dOLYEmliTKweOr","AdTools");var o=i;Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.getSDKVersion=function(t){var e=t.getSystemInfoSync().SDKVersion;return e=e.replace(/\./g,""),parseInt(e)},t.checkImageUrl=function(e,i){var o;return o=i?e.iconUrl||e.imgUrlList.find(function(t){return t&&""!=t?t:null}):e.imgUrlList.find(function(t){return t&&""!=t?t:null})||e.iconUrl,t.checkUrl(o)},t.checkUrl=function(t){if(!t)return"";var e=t.indexOf(".jpg"),i=t.indexOf(".png"),o=t;return-1!=e&&(o=t.substring(0,e)+".jpg"),-1!=i&&(o=t.substring(0,i)+".png"),o},t}();o.default=n,cc._RF.pop()},{}],AdsManager:[function(t,e,i){"use strict";cc._RF.push(e,"aaeb6HdosVPC6s4qxznwc6p","AdsManager");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0});var s=o("GlobalEvent"),r=(o("Constants"),o("Log"),o("PlatformUtils"),o("UiUtil"),o("ShuFenReport"),o("GameCommon")),a=o("AdDeclare"),c=(o("GameTdd"),o("PlatformAd"),o("PlatformShare"),o("NativeBanner"),o("NativeInterstitialAd"),function(){function t(){this.config=new a.AdInitConfig,this.title="\u5f53\u4e00\u56de\u4e0a\u5e1d",this.desc="\u662f\u521b\u9020\u8fd8\u662f\u6bc1\u706d\uff1f",this.videoTopics=["\u7cbe\u54c1\u597d\u6e38"],this.interval_banner=-1,this.interval_custom=-1,this.btnClub=null,this.nativeBanner=null,this.bannerType=a.BannerType.NORMAL,this.adIdx=1,this.videoShow=!0,this.backTime=0}return t.prototype.init=function(){s.default.on(s.Global_Event_Type.GAME_TO_BACKGROUND,this.onEnterBackGround,this),s.default.on(s.Global_Event_Type.BACKGROUND_TO_GAME,this.onBackToGame,this)},t.prototype.onEnterBackGround=function(){this.backTime=cc.sys.now()},t.prototype.onBackToGame=function(){0!=this.backTime&&(cc.sys.now()-this.backTime)/1e3>=8&&(this.backTime=0,r.default.isPaused||OPPO_GAME||HUAWEI_GAME||this.showInterstitialAd())},t.prototype.setPause=function(t){t?(cc.director.pause(),cc.audioEngine.pauseAll()):(cc.director.resume(),cc.audioEngine.resumeAll())},t.prototype.isServerDataReady=function(){return!0},t.prototype.getGameCustomData=function(){return null},t.prototype.getGameAdvertData=function(){return null},t.prototype.reportNativeAdShow=function(){},t.prototype.reportNativeAdClick=function(){},t.prototype.showBannerAd=function(){ANDROIDApi.showBanner(),cc.error("============","showBannerAd")},t.prototype.hideBannerAd=function(){ANDROIDApi.hideBanner()},t.prototype.showBoxBannerAd=function(){},t.prototype.hideBoxBannerAd=function(){},t.prototype.moveBanner=function(){},t.prototype.showNativeBannerAd=function(){ANDROIDApi.showInsertAd()},t.prototype.hideNativeBannerAd=function(){},t.prototype.refreshNativeBannerAd=function(){},t.prototype.showAppBoxAd=function(){},t.prototype.closeAppBoxAd=function(){},t.prototype.showVideoAds=function(t){cc.error("============","showVideoAds");var e=this;this.setPause(!0),ANDROIDApi.showVideo(function(i){e.setPause(!1),1==i&&cc.director.emit("updateVideoCount"),t&&t(i)})},t.prototype.showInterstitialAd=function(){ANDROIDApi.showInsertAd()},t.prototype.showNativeInterstitialAd=function(){ANDROIDApi.showInsertAd()},t.prototype.preloadNativeAd=function(){},t.prototype.getNativeAdData=function(){return null},t.prototype.showCustomAd=function(){},t.prototype.hideCustomAd=function(){},t.prototype.showClubButton=function(){},t.prototype.startRecording=function(){},t.prototype.isRecording=function(){return!1},t.prototype.getRecordedVideoPath=function(){return null},t.prototype.stopRecording=function(){},t.prototype.shareAppMessage=function(){},t.prototype.shareVideo=function(){},t.prototype.showShareMenu=function(){},t.prototype.hideShareMenu=function(){},t.prototype.checkImageUrl=function(t){var e=t.iconUrl;return e?this.checkUrl(e):(e=t.imgUrlList.find(function(t){return t&&""!=t?t:null}),this.checkUrl(e))},t.prototype.checkUrl=function(t){if(!t)return"";var e=t.indexOf(".jpg"),i=t.indexOf(".png"),o="";return-1!=e&&(o=t.substring(0,e)+".jpg"),-1!=i&&(o=t.substring(0,i)+".png"),o||(o=t+".jpg"),o},t.inst=new t,t.callbacks={},t}());n.default=c.inst,cc._RF.pop()},{}],AppBoxAdModule:[function(t,e,i){"use strict";cc._RF.push(e,"84775HjIShG0ZUbuMGSsnAP","AppBoxAdModule");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0});var s=o("MsgCache"),r=o("AdDeclare"),a=function(){function t(){this.adPositionId="",this.adObj=null,this.adResultCallback=null}return t.prototype.showAd=function(t,e){var i,o,n,s,r,a,c,l,d,h,u,p,f,_=this;this.adResultCallback=t,this.adPositionId=e,this.adObj&&this.closeAd();var y=null===PLATFORM||void 0===PLATFORM?void 0:PLATFORM.getSystemInfoSync();window.qq?this.adObj=null===(i=qq.createAppBox)||void 0===i?void 0:i.call(qq,{adUnitId:this.adPositionId}):window.qg?this.adObj=null===(o=qg.createGamePortalAd)||void 0===o?void 0:o.call(qg,{adUnitId:this.adPositionId}):WECHAT_GAME&&(this.adObj=null===(n=wx.createCustomAd)||void 0===n?void 0:n.call(wx,{adUnitId:this.adPositionId,adIntervals:60,style:{left:(y.windowWidth-300)/2,top:115,width:300}})),this.adObj&&(console.log("AppBoxAd create success: ",this.adPositionId),null===(r=(s=this.adObj).onLoad)||void 0===r||r.call(s,this.onLoad_.bind(this)),null===(c=(a=this.adObj).onError)||void 0===c||c.call(a,this.onError_.bind(this)),null===(d=(l=this.adObj).onClose)||void 0===d||d.call(l,this.onClose_.bind(this)),null===(u=(h=this.adObj).onResize)||void 0===u||u.call(h,this.onResize_.bind(this))),null===(f=null===(p=this.adObj)||void 0===p?void 0:p.load)||void 0===f||f.call(p).then(function(){var t,e;null===(e=null===(t=_.adObj)||void 0===t?void 0:t.show)||void 0===e||e.call(t)})},t.prototype.onLoad_=function(){window.qg||this.adObj.show(),console.log("AppBoxAd onLoad"),cc.director.emit("appBoxOnLoad")},t.prototype.onError_=function(t){console.log("AppBoxAd onError:",t?JSON.stringify(t):t),s.default.pushToast("\u6682\u65e0\u5408\u9002\u7684\u63a8\u8350")},t.prototype.onClose_=function(){console.log("AppBoxAd onClose"),this.adResultCallback&&(this.adResultCallback(r.AdResultState.ON_CLOSE_FINISH),this.adResultCallback=null)},t.prototype.onResize_=function(t){if(console.log("AppBoxAd onResize",t),this.adObj&&0!=t.width&&0!=t.height&&window.wx){var e=wx.getSystemInfoSync();console.log(t.width,t.height),this.adObj.style.left=(e.windowWidth-t.width)/2}},t.prototype.closeAd=function(){this.adObj&&(this.adObj.offLoad(this.onLoad_.bind(this)),this.adObj.offError(this.onError_.bind(this)),this.adObj.destroy(),this.adObj=null,console.log("AppBoxAd Close"))},t.inst=new t,t}();n.default=a.inst,cc._RF.pop()},{}],BannerAdModule:[function(t,e,i){"use strict";cc._RF.push(e,"f5c90jIBFtET6QHr7W3PWWH","BannerAdModule");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0});var s=o("GameTdd"),r=function(){function t(){this.adPositionId="",this.appSid="",this.adObj=null,this.loaded=!1,this.top=0,this.realSize=cc.Size.ZERO,this.createTime=0,this.adIntervals=0,this.isShow=!1,this.isMoved=!1}return t.prototype.showAd=function(t,e){if(void 0===e&&(e=""),this.adPositionId=t,this.appSid=e,this.adIntervals=s.default.success?s.default.getData("p1",s.v_type.Number):HUAWEI_GAME?60:30,0==this.createTime&&(this.createTime=cc.sys.now()/1e3),this.adObj){var i=cc.sys.now()/1e3-this.createTime;this.isMoved&&i<90?this.moveAd():this.create_()}else this.create_()},t.prototype.create_=function(){var t,e,i,o,n,s,r;this.adObj&&this.closeAd(),console.log("BannerAd create: ",this.adPositionId);var a=null===PLATFORM||void 0===PLATFORM?void 0:PLATFORM.getSystemInfoSync(),c=WECHAT_GAME||BAIDU_GAME?300:a.windowWidth;HUAWEI_GAME&&(c=360),QQ_GAME&&(c*=.92);var l=HUAWEI_GAME?57:115;QQ_GAME&&(l=83.73);var d=HUAWEI_GAME?a.safeArea.width/c:1;this.adObj=null===(t=null===PLATFORM||void 0===PLATFORM?void 0:PLATFORM.createBannerAd)||void 0===t?void 0:t.call(PLATFORM,{adUnitId:this.adPositionId,appSid:this.appSid,posId:this.adPositionId,adIntervals:this.adIntervals,style:VIVO_GAME||OPPO_GAME?{}:{left:BAIDU_GAME||QQ_GAME?(a.windowWidth-c)/2:0,top:HUAWEI_GAME?a.safeArea.bottom-l*d:a.windowHeight-l,height:l,width:c}}),this.adObj&&(null===(i=(e=this.adObj).onLoad)||void 0===i||i.call(e,this.onLoad_.bind(this)),null===(n=(o=this.adObj).onError)||void 0===n||n.call(o,this.onError_.bind(this)),null===(r=(s=this.adObj).onResize)||void 0===r||r.call(s,this.onResize_.bind(this)),HUAWEI_GAME&&this.show_())},t.prototype.show_=function(){var t=this;console.log("showBannerAd: ",this.adPositionId),HUAWEI_GAME?this.adObj.show():this.adObj.show().then(function(){t.isShow=!0,console.log("BannerAd show success"),0!=t.realSize.height&&cc.director.emit("bannerResize",t.realSize.height)}).catch(function(t){console.log("BannerAd show failed2",t)})},t.prototype.onLoad_=function(){this.loaded=!0,console.log("BannerAd onLoad"),HUAWEI_GAME||this.show_()},t.prototype.isLoaded=function(){return this.loaded},t.prototype.onError_=function(t){this.closeAd(),console.log("BannerAd onError:",t?JSON.stringify(t):t),cc.director.emit("bannerError")},t.prototype.onResize_=function(t){var e,i;if(console.log("BannerAd onResize",t),this.adObj&&0!=t.width&&0!=t.height){if(PLATFORM){var o=PLATFORM.getSystemInfoSync();null!=(null===(e=this.adObj.style)||void 0===e?void 0:e.top)&&(this.adObj.style.top=this.isMoved?cc.view.getFrameSize().height:o.windowHeight-t.height),null!=(null===(i=this.adObj.style)||void 0===i?void 0:i.left)&&(this.adObj.style.left=(o.windowWidth-t.width)/2)}var n=WECHAT_GAME||BAIDU_GAME||QQ_GAME?t.height:114;this.realSize=cc.size(t.width,n),cc.director.emit("bannerResize",n)}},t.prototype.moveAd=function(t){void 0===t&&(t=0),this.top=t,this.isMoved=!1;var e=cc.view.getFrameSize();if(this.adObj&&this.isShow){if(0==t)this.adObj.style.top=e.height-this.realSize.height,this.adObj.style.left=(e.width-this.realSize.width)/2;else{var i=1-t/cc.winSize.height;this.adObj.style.top=e.height*i-this.realSize.height/2}console.log("BannerAd moveAd success"),0!=this.realSize.height&&cc.director.emit("bannerResize",this.realSize.height)}else this.create_()},t.prototype.hideAd=function(){if(this.adObj)if(cc.sys.platform==cc.sys.WECHAT_GAME){var t=cc.sys.now()/1e3-this.createTime;this.isMoved=!0,this.adObj.style.top=cc.view.getFrameSize().height,console.log("BannerAd Hide1"),t>90&&this.create_()}else this.adObj.hide(),console.log("BannerAd Hide2")},t.prototype.closeAd=function(){var t,e,i,o,n,s,r,a,c,l;this.isShow=!1,this.loaded=!1,this.createTime=0,this.adObj&&(null===(e=(t=this.adObj).offLoad)||void 0===e||e.call(t,this.onLoad_.bind(this)),null===(o=(i=this.adObj).offError)||void 0===o||o.call(i,this.onError_.bind(this)),null===(s=(n=this.adObj).offResize)||void 0===s||s.call(n,this.onResize_.bind(this)),null===(a=(r=this.adObj).hide)||void 0===a||a.call(r),null===(l=(c=this.adObj).destroy)||void 0===l||l.call(c),this.adObj=null,console.log("BannerAd Close"))},t.inst=new t,t}();n.default=r,cc._RF.pop()},{}],BoxBannerAdModule:[function(t,e,i){"use strict";cc._RF.push(e,"2438fCpag9BvYnUKrSHJrPp","BoxBannerAdModule");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0});var s=o("GameTdd"),r=function(){function t(){this.adPositionId="",this.adObj=null,this.loaded=!1,this.height=0,this.left=0,this.createTime=0,this.adIntervals=0,this.isMove=!1,this.isShow=!1,this.failedNum=0}return t.prototype.showAd=function(t){this.adPositionId=t;var e=s.default.success?s.default.getData("p2",s.v_type.NumberList):[30,100];if(this.adIntervals=e[1],0==this.createTime&&(this.createTime=cc.sys.now()/1e3),this.adObj){var i=cc.sys.now()/1e3-this.createTime;WECHAT_GAME&&i<90?this.show_():(this.closeAd(),this.createTime=0)}else this.create_()},t.prototype.create_=function(){var t,e,i;if(console.log("BoxBannerAd create"),window.qq)this.adObj=null===(t=qq.createBlockAd)||void 0===t?void 0:t.call(qq,{adUnitId:this.adPositionId,size:4,orientation:"landscape",style:{left:15,top:15}});else if(window.wx){var o=wx.getSystemInfoSync();this.height=106,this.left=(o.windowWidth-300)/2,console.log("BoxBannerAd Width",this.left),this.adObj=null===(e=wx.createCustomAd)||void 0===e?void 0:e.call(wx,{adUnitId:this.adPositionId,adIntervals:this.adIntervals,style:{left:this.left,top:60}})}else window.qg&&(this.adObj=null===(i=qg.createGameBannerAd)||void 0===i?void 0:i.call(qg,{adUnitId:this.adPositionId}));this.adObj&&(this.adObj.onLoad&&this.adObj.onLoad(this.onLoad_.bind(this)),this.adObj.onError&&this.adObj.onError(this.onError_.bind(this)),this.adObj.onResize&&this.adObj.onResize(this.onResize_.bind(this)),window.qg&&this.show_())},t.prototype.show_=function(){var t=this;this.adObj&&this.adObj.show().then(function(){console.log("BoxBannerAd show success")}).catch(function(e){console.log("BoxBannerAd show failed",e),t.closeAd()})},t.prototype.onLoad_=function(){this.loaded=!0,window.qg||this.show_(),console.log("BoxBannerAd onLoad")},t.prototype.onError_=function(t){var e=this;this.isShow=!1,cc.director.emit("bannerOnError"),console.log("BoxBannerAd onError:",t?JSON.stringify(t):t),setTimeout(function(){!e.loaded&&e.adObj&&e.showAd(e.adPositionId)},5e3)},t.prototype.onResize_=function(t){if(console.log("BoxBannerAd onResize",t),this.adObj&&0!=t.width&&0!=t.height)if(window.qq){var e=((o=qq.getSystemInfoSync()).windowWidth-t.width)/2,i=o.windowHeight-t.height-17;this.adObj.style.left==e&&this.adObj.style.top==i||(this.adObj.style.left=e,this.adObj.style.top=i)}else if(window.wx){var o=wx.getSystemInfoSync();console.log(t.width,t.height),this.adObj.style.top=o.windowHeight-t.height,this.adObj.style.left=(o.windowWidth-t.width)/2}},t.prototype.moveAd=function(t){if(WECHAT_GAME){if(this.adObj){var e=wx.getSystemInfoSync(),i=t?2*e.windowWidth:this.left;this.adObj.style.left=i,this.isShow||this.show_()}this.isMove=t}},t.prototype.hideAd=function(){this.isMove=!1,this.isShow=!1,this.loaded=!1,this.adObj&&this.adObj.hide(),console.log("BoxBannerAd Hide")},t.prototype.closeAd=function(){this.isMove=!1,this.isShow=!1,this.loaded=!1,this.adObj&&(this.adObj.offLoad&&this.adObj.offLoad(this.onLoad_.bind(this)),this.adObj.offError&&this.adObj.offError(this.onError_.bind(this)),this.adObj.offResize&&this.adObj.offResize(this.onResize_.bind(this)),this.adObj.destroy&&this.adObj.destroy(),this.adObj=null,console.log("BoxBannerAd Close"))},t.inst=new t,t}();n.default=r.inst,cc._RF.pop()},{}],Counter:[function(t,e,i){"use strict";cc._RF.push(e,"c77bbrvT/BBxLyBx5DYi672","Counter");var o,n=i,s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,d=a.requireComponent,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.time=1,e.keepInteger=!0,e.label=null,e._value=0,e.tween=null,e.lastTarget=0,e}return s(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this.keepInteger&&(t=Math.floor(t)),this._value=t,this.label.string=t.toString()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.init()},e.prototype.init=function(){this.label=this.getComponent(cc.Label),this.value=0},e.prototype.setValue=function(t){this.value=t},e.prototype.setTime=function(t){this.time=t},e.prototype.to=function(t,e,i){var o=this;return void 0===e&&(e=null),new Promise(function(n){o.tween&&(o.tween.stop(),o.tween=null),null!==e&&(o.time=e),o.lastTarget=t,o.tween=cc.tween(o).to(o.time,{value:t}).call(function(){i&&i(),o.tween=null,n()}).start()})},e.prototype.by=function(t,e,i){var o=this;return void 0===e&&(e=null),new Promise(function(n){o.tween&&(o.tween.stop(),o.tween=null,o.value=o.lastTarget),null!==e&&(o.time=e),o.lastTarget=o.value+t,o.tween=cc.tween(o).to(o.time,{value:o.lastTarget}).call(function(){i&&i(),o.tween=null,n()}).start()})},r([l({})],e.prototype,"time",void 0),r([l({})],e.prototype,"keepInteger",void 0),r([c,d(cc.Label)],e)}(cc.Component);n.default=h,cc._RF.pop()},{}],CustomAdModule:[function(t,e,i){"use strict";cc._RF.push(e,"2c5143BiIFOXbPrZT+XDwCw","CustomAdModule");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0});var s=o("ServerData"),r=function(){function t(){this.adPositionId="",this.adObj=null}return t.prototype.showAd=function(t,e){var i,o;this.adPositionId=t;var n=s.default.advertData,r=(null==n?void 0:n.customAd)?n.customAd.adIntervals:30;this.adObj&&this.closeAd(),WECHAT_GAME?this.adObj=null===(i=wx.createCustomAd)||void 0===i?void 0:i.call(wx,{adUnitId:this.adPositionId,adIntervals:r,style:{left:e.x,top:e.y}}):QQ_GAME&&(this.adObj=null===(o=qq.createBlockAd)||void 0===o?void 0:o.call(qq,{adUnitId:this.adPositionId,size:1,orientation:"landscape",style:{left:e.x,top:e.y}})),this.adObj&&(this.adObj.onLoad(this.onLoad_.bind(this)),this.adObj.onError(this.onError_.bind(this)))},t.prototype.closeAd=function(){this.adObj&&(this.adObj.offLoad(this.onLoad_.bind(this)),this.adObj.offError(this.onError_.bind(this)),this.adObj.destroy(),this.adObj=null,console.log("Icon Ad Close"))},t.prototype.onError_=function(t){console.log("Icon Ad show error:",t)},t.prototype.onLoad_=function(){this.adObj&&this.adObj.show().then(function(){console.log("Icon Ad show success")}).catch(function(t){console.log("Icon Ad show failed",t)})},t.inst=new t,t}();n.default=r.inst,cc._RF.pop()},{}],Dialog:[function(t,e,i){"use strict";cc._RF.push(e,"95085OfOBBF9qj+15ES6U6s","Dialog");var o,n=t,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(s,"__esModule",{value:!0});var c=n("AudioMgr"),l=cc._decorator,d=l.ccclass,h=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnOK=null,e.btnNO=null,e.text=null,e.callback=null,e}return r(e,t),e.prototype.onLoad=function(){this.okBtnX=this.btnOK.x},e.prototype.close=function(t,e){void 0===e&&(e="0"),c.default.playOpenEffect(),this.node.destroy(),this.callback&&this.callback(parseInt(e))},e.prototype.show=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!0),this.callback=e,this.text.string=t,this.btnNO.active=i,this.btnOK.x=i?this.okBtnX:0},a([h(cc.Node)],e.prototype,"btnOK",void 0),a([h(cc.Node)],e.prototype,"btnNO",void 0),a([h(cc.Label)],e.prototype,"text",void 0),a([d],e)}(cc.Component);s.default=u,cc._RF.pop()},{}],FestivityData:[function(t,e,i){"use strict";cc._RF.push(e,"1c1da8qCUlPuKR1Yev3zTmd","FestivityData");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.FestConfig=n.Fest=void 0;var s=o("DateUtils"),r=o("Constants"),a=o("ResMgr"),c=o("Tools"),l=function(){this.id=0,this.name="",this.start=0,this.end=0,this.rewarded=0,this.rate={}};n.Fest=l,n.FestConfig=function(){this.id=0,this.name="",this.start=0,this.end=0,this.desc="",this.reward=[]};var d=r.default.IS_AD_SHOW?"SANDBOX_FEST_KEY":"SANDBOX_FEST_KEY_TEMP",h=function(){function t(){this.config={},this._festList={},this.needSave=!1}return t.prototype.loadConfig=function(){a.default.loadRes("res/conf/festivityCfg",cc.JsonAsset).then(function(t){for(var e in t.json)if(Object.prototype.hasOwnProperty.call(t.json,e)){var i=t.json[e];this.config[i.id]=i;for(var o=c.default.fromJson(i,new l),n=o.start;n<o.end+1;n++)n%100==0||n%100>31||(o.rate[n.toString()]=!1);this._festList[i.id]=o}this.load()}.bind(this))},t.prototype.load=function(){var t=cc.sys.localStorage.getItem(d);if(t){var e=JSON.parse(t);for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(this._festList[i]=e[i])}else this.save();setInterval(function(){this.needSave&&(cc.sys.localStorage.setItem(d,JSON.stringify(this._festList)),this.needSave=!1)}.bind(this),1e3)},t.prototype.save=function(){(r.default.IS_LOCAL||r.default.OPEN_FEST)&&(this.needSave=!0)},t.prototype.getFestByID=function(t){return this._festList[t.toString()]},t.prototype.getCurrentFestivals=function(){var t=parseInt(s.default.formatDayTime());for(var e in this._festList){var i=this._festList[e];if(t>=i.start&&t<=i.end)return i}return null},t.prototype.getConfigByID=function(t){return this.config[t.toString()]},t.inst=new t,t}();n.default=h.inst,cc._RF.pop()},{}],GameCommon:[function(t,e,i){"use strict";cc._RF.push(e,"f174cfvKAlHsJD4LFlXv6CE","GameCommon");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0});var s=o("AdsManager"),r=o("GameTdd"),a=function(){function t(){this._isPaused=!1,this._pauseList=[],this.isInAddressBlackList=!0,this.serverDataReady=!1,this.blackListNames=["\u6df1\u5733"],this.whiteListScenes=[1058,1095,1045,1046,1067,1084],this.unLockBigMap=!1,this.unLockSuperMap=!1}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return this._isPaused||0!=this._pauseList.length},enumerable:!1,configurable:!0}),t.prototype.setPause=function(t){this._isPaused=t},t.prototype.pushPause=function(t){t?this._pauseList.push(1):this._pauseList.pop()},t.prototype.isSceneBlackList=function(){if(WECHAT_GAME){var t=s.default.getGameCustomData();if(!t)return!1;if(t.sceneList){if(t.sceneList.enable){for(var e=0;e<t.sceneList.list.length;e++)if(t.scene==t.sceneList.list[e])return!1;return!0}return!1}for(e=0;e<this.whiteListScenes.length;e++)if(t.scene==this.whiteListScenes[e])return!1;return!0}return!1},t.prototype.checkIsInBlackList=function(t){var e=this,i=setInterval(function(){if(!e.serverDataReady&&s.default.isServerDataReady()){e.serverDataReady=!0,clearInterval(i);var o=r.default.success?r.default.getData("p9",r.v_type.StringList):["\u6df1\u5733"];o&&e.doCheck(t,o)}},100);this.doCheck(t,this.blackListNames)},t.prototype.doCheck=function(t,e){for(var i=!1,o=0;o<e.length;o++){var n=e[o];if(t.includes(n)){i=!0,this.isInAddressBlackList=!0;break}}!i&&t&&(this.isInAddressBlackList=!1),t.includes("\u4e2d\u56fd")||(this.isInAddressBlackList=!0)},t.inst=new t,t}();n.default=a.inst,cc._RF.pop()},{}],GamePopBase:[function(t,e,i){"use strict";cc._RF.push(e,"ddc42gjMdRN4aCQrr9/nc8U","GamePopBase");var o,n=t,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(s,"__esModule",{value:!0}),s.GamePopBase=void 0;var c=n("AudioMgr"),l=n("GameTdd"),d=n("GameCommon"),h=cc._decorator,u=h.ccclass,p=h.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.subBg=null,e.closeCB=null,e.clickCB=null,e.tweenTime=.3,e}return r(e,t),e.prototype.onEnable=function(){d.default.pushPause(!0)},e.prototype.onDisable=function(){d.default.pushPause(!1)},e.prototype.setCallback=function(t,e){this.clickCB=t,this.closeCB=e},e.prototype.open=function(t){void 0===t&&(t=null),this.bg&&(this.bg.x=cc.winSize.width,this.bg.active=!0,cc.tween(this.bg).to(this.tweenTime,{x:0},{easing:"backOut"}).call(function(){t&&t()}).start());var e=this.node.getChildByName("mask");e&&(e.opacity=0,cc.tween(e).to(this.tweenTime,{opacity:125}).call(function(){e.getComponent(cc.BlockInputEvents).enabled=!0}).start())},e.prototype.close=function(t,e){var i=this;void 0===t&&(t=!1),void 0===e&&(e=null),c.default.playCloseEffect();var o=(t="boolean"==typeof t&&t)?-cc.winSize.width:cc.winSize.width,n=l.default.success&&!this.name.includes("BrushWindow")?l.default.getData("p5",l.v_type.Number):0;n=t?0:n,cc.tween(this.bg).delay(n).call(function(){i.closeCB&&i.closeCB(t)}).to(this.tweenTime,{x:o},{easing:"backOut"}).call(function(){e&&"function"==typeof e&&e(),i.node.destroy()}).start();var s=this.node.getChildByName("mask");s&&(s.getComponent(cc.BlockInputEvents).enabled=!1,cc.tween(s).delay(n).to(this.tweenTime,{opacity:0}).start())},e.prototype.move=function(t,e){var i=this;void 0===t&&(t=!0),void 0===e&&(e=null),c.default.playCloseEffect();var o=t?-cc.winSize.width:cc.winSize.width;this.bg&&(this.bg.active=!0,cc.tween(this.bg).by(this.tweenTime,{x:o},{easing:"backOut"}).call(function(){e&&e(),i.bg.active=0==i.bg.x}).start()),this.subBg&&(this.subBg.active=!0,cc.tween(this.subBg).by(this.tweenTime,{x:o},{easing:"backOut"}).call(function(){e&&e(),i.subBg.active=0==i.subBg.x}).start())},a([p({type:cc.Node,tooltip:"\u7528\u6765tween\u6574\u4e2a\u7a97\u53e3\u7684\u6839\u8282\u70b9"})],e.prototype,"bg",void 0),a([p({type:cc.Node,tooltip:"\u5982\u679c\u6709\u4e24\u7ea7\u5f39\u6846\uff0c\u8fd9\u4e2a\u4e3a\u5b50\u754c\u9762\u5f39\u6846\uff0c\u6ca1\u6709\u5c31\u4e0d\u7528\u586b"})],e.prototype,"subBg",void 0),a([u],e)}(cc.Component);s.GamePopBase=f,cc._RF.pop()},{}],GameScreenRecorder:[function(t,e,i){"use strict";cc._RF.push(e,"400a5e8xfBIw4uEVdChkb6/","GameScreenRecorder");var o=i;Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.gameRecorderManager=null,this.videoPath=null,this.currentRecordMS=0,this.startRecordingTimeInMS=0,this.totalClipedSeconds=0,this.clipIndexList=[],this.isRecording_=!1,this.callback=null,this.keepLastSeconds=30}return t.prototype.init=function(){var t=this;this.gameRecorderManager=tt.getGameRecorderManager(),this.gameRecorderManager.onError(function(e){console.error("Recorder onError",e),t.callback&&(t.callback(!1),t.callback=null)}),this.gameRecorderManager.onInterruptionBegin(function(){console.log("Recorder onInterruptionBegin")}),this.gameRecorderManager.onInterruptionEnd(function(){console.log("Recorder onInterruptionEnd")}),this.gameRecorderManager.onPause(function(){console.log("Recorder onPause")}),this.gameRecorderManager.onResume(function(){console.log("Recorder onResume")}),this.gameRecorderManager.onStart(function(t){console.log("Recorder onStart",t)}),this.gameRecorderManager.onStop(function(e){if(console.log("Recorder onStop",e),t.isRecording_=!1,t.accumulateRecordTime_(),t.startRecordingTimeInMS=0,t.currentRecordMS<3e3)return console.warn("Recording time less 3s, discard"),void(t.callback&&(t.callback(!1),t.callback=null));var i=null,o=null;t.currentRecordMS>1e3*t.keepLastSeconds&&(i=[t.keepLastSeconds,0]),t.clipIndexList.length>0&&t.totalClipedSeconds>=5&&(i=null,o=t.clipIndexList),console.log("Recorder onStop",i,o,e.videoPath),i||o?t.clipVideo_(e,i,o,function(i){i?(t.videoPath=i.videoPath,console.log("clipVideo success",i.videoPath)):(console.error("clipVideo failed"),t.videoPath=e.videoPath),t.callback&&(t.callback(!0),t.callback=null)}):(t.videoPath=e.videoPath,t.callback&&(t.callback(!0),t.callback=null))})},t.prototype.supportScreenRecording=function(){return null!=this.gameRecorderManager},t.prototype.isRecording=function(){return this.isRecording_},t.prototype.startRecording=function(t,e){this.isRecording_||(console.log("startRecording"),this.callback=t,this.isRecording_=!0,this.clipIndexList=[],this.currentRecordMS=0,this.startRecordingTimeInMS=Date.now(),this.videoPath=null,this.gameRecorderManager.start({duration:e}))},t.prototype.stopRecording=function(t){console.log("stopRecording"),this.keepLastSeconds=t,this.isRecording_=!1,this.gameRecorderManager.stop()},t.prototype.pause=function(){this.isRecording_&&(console.log("pause Recording"),this.isRecording_=!1,this.accumulateRecordTime_(),this.gameRecorderManager.pause())},t.prototype.resume=function(){this.isRecording_||(console.log("resume Recording"),this.isRecording_=!0,this.startRecordingTimeInMS=Date.now(),this.gameRecorderManager.resume())},t.prototype.recordClip=function(t){var e=this,i=t||[3,3];this.totalClipedSeconds,i[0],this.totalClipedSeconds,i[1],this.gameRecorderManager.recordClip({timeRange:i,success:function(t){e.clipIndexList.push(t.index),console.log("recordClip",i,t.index)}})},t.prototype.getVideoPath=function(){return this.videoPath},t.prototype.clipVideo_=function(t,e,i,o){this.gameRecorderManager.clipVideo({path:t.videoPath,timeRange:e,clipRange:i,success:o,fail:function(){console.error("clipVideo failed.")}})},t.prototype.accumulateRecordTime_=function(){this.startRecordingTimeInMS>0&&(this.currentRecordMS+=Date.now()-this.startRecordingTimeInMS)},t.inst=new t,t}();o.default=n.inst,cc._RF.pop()},{}],GameTdd:[function(t,e,i){"use strict";cc._RF.push(e,"eb7adxtq+NNaJ4LeyGd1IIP","GameTdd");var o,n=t,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(s,"__esModule",{value:!0}),s.v_type=void 0;var a,c=n("Constants"),l=n("NetCore"),d=n("Log");(function(t){t[t.String=0]="String",t[t.Number=1]="Number",t[t.Bool=2]="Bool",t[t.Json=3]="Json",t[t.StringList=4]="StringList",t[t.NumberList=5]="NumberList",t[t.BoolList=6]="BoolList"})(a=s.v_type||(s.v_type={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.serverData=null,e.gameId="",e.sid="",e.serverDataReady=!1,e}return r(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.serverData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"success",{get:function(){return this.serverDataReady},enumerable:!1,configurable:!0}),e.prototype.requestData=function(t,e){void 0===e&&(e=""),this.gameId=t,this.sid=e;var i="";switch(c.default.CHANNEL){case c.CHANNEL_TYPE.\u666e\u901a:i="https://ga.gametdd.com/adCtrl/agd/conf";var o={id:t,sid:e};this.post("customData",i,JSON.stringify(o),{"Content-Type":"application/json; charset=utf-8"});break;case c.CHANNEL_TYPE.\u666e\u901a\u4e8c:i=c.default.HTTP_PATH+"/"+t+"/gameCustomData",this.get(e,i)}},e.prototype.onHttpMessage=function(t,e,i){if(e){var o=JSON.parse(i);switch(c.default.CHANNEL){case c.CHANNEL_TYPE.\u666e\u901a:0==(null==o?void 0:o.code)?(this.serverDataReady=!0,this.serverData=o.data,d.default.v("customData yr:",JSON.stringify(o.data)+"\n")):d.default.e("\u83b7\u53d6\u6570\u636e\u5931\u8d25:",o.desc);break;case c.CHANNEL_TYPE.\u666e\u901a\u4e8c:if(null==o?void 0:o.status){var n=o.data.settingList[0];this.serverDataReady=!0,this.serverData=JSON.parse(n),cc.log("customData mjz",n+"\n")}}}else d.default.e("\u83b7\u53d6\u6570\u636e\u5931\u8d25:",i)},e.prototype.getData=function(t,e){if(void 0===e&&(e=a.String),this.serverData){var i=this.serverData[t],o=[];switch(e){case a.String:return i;case a.Number:return Number(i);case a.Bool:return"yes"==i||"true"==i;case a.Json:return JSON.parse(i);case a.StringList:return i.split(",").forEach(function(t){o.push(t)}),o;case a.NumberList:return i.split(",").forEach(function(t){o.push(Number(t))}),o;case a.BoolList:return i.split(",").forEach(function(t){o.push("yes"==t||"true"==t)}),o;default:return i}}else this.gameId&&this.requestData(this.gameId,this.sid);return null},e.inst=new e,e}(l.default);s.default=h.inst,cc._RF.pop()},{}],GlobalNode:[function(t,e,i){"use strict";cc._RF.push(e,"c5e1c/5OVVKVZzopFJVlEBz","GlobalNode");var o,n=t,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(s,"__esModule",{value:!0});var c=n("Constants"),l=n("Log"),d=cc._decorator,h=d.ccclass,u=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touched=!1,e.touchPos=null,e}var i;return r(e,t),i=e,e.prototype.onLoad=function(){cc.game.isPersistRootNode(this.node)||(l.default.d("GlobalNode onLoad"),cc.game.addPersistRootNode(this.node),c.default.GLOBAL_NODE=this.node,i.inst=this,this.node.zIndex=c.default.MAX_ZINDEX),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node._touchListener.setSwallowTouches(!1)},e.prototype.onTouchStart=function(){this.touched=!0},e.prototype.onTouchEnd=function(t){this.touched=!1,this.touchPos=t.getLocation()},e.inst=null,i=a([h],e)}(cc.Component));s.default=u,cc._RF.pop()},{}],GuideView:[function(t,e,i){"use strict";cc._RF.push(e,"71ed0gfXgRMdqCpyUwP0Dcs","GuideView");var o,n,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},c=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,s=i.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=s.next()).done;)r.push(o.value)}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return r},l=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t};Object.defineProperty(s,"__esModule",{value:!0}),s.FINGER_ACTION=void 0,function(t){t[t.touch=0]="touch",t[t.upAndDown=1]="upAndDown",t[t.leftAndRight=2]="leftAndRight"}(n=s.FINGER_ACTION||(s.FINGER_ACTION={}));var d=cc._decorator,h=d.ccclass,u=d.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.frame=null,e.touch=null,e.highlightInterceptTouch=null,e.finger=null,e.fingerZoom=null,e.text=null,e.npc=null,e.npcSp=[],e.strList=[],e.strIdx=0,e.audioIdx=0,e.talkEndCB=null,e.clickEndCB=null,e.obstruct=!1,e}var i;return r(e,t),i=e,e.prototype.onLoad=function(){i.inst=this,QQ_GAME&&(this.npc.enabled=!1)},e.prototype.init=function(t){void 0===t&&(t=!1),this.npc.spriteFrame=t?this.npcSp[1]:this.npcSp[0]},e.prototype.start=function(){},e.prototype.hide=function(t){void 0===t&&(t=null),this.closeTips(t),this.showFrame(!1),this.showFinger(!1),this.showFingerZoom(!1)},e.prototype.showMaskOpacity=function(t){void 0===t&&(t=0),this.enabledTouch(!0),this.mask.getChildByName("touch").opacity=t},e.prototype.showFrame=function(t,e,i){void 0===e&&(e=cc.v3(-2e3)),void 0===i&&(i=cc.Size.ZERO),this.showMaskOpacity(t?100:0),this.frame.position=e,this.frame.width=i.width,this.frame.height=i.height,this.mask.width=i.width,this.mask.height=i.height},e.prototype.enabledTouch=function(t){this.touch.active=t},e.prototype.interceptHighlightFrameTouch=function(t){this.highlightInterceptTouch.active=t},e.prototype.showFinger=function(t,e,i,o){var s=this;switch(void 0===e&&(e=cc.Vec3.ZERO),void 0===i&&(i=!1),void 0===o&&(o=n.touch),this.finger.active||(this.finger.position=e),this.finger.active=t,this.finger.stopAllActions(),this.finger.getChildByName("mask").active=i,o){case n.touch:cc.tween(this.finger).to(.2,{position:e}).call(function(){cc.tween(s.finger).delay(.5).to(.2,{y:e.y-10,scale:1.1}).to(.2,{y:e.y,scale:1}).to(.2,{y:e.y-10,scale:1.1}).to(.2,{y:e.y,scale:1}).union().repeatForever().start()}).start();break;case n.upAndDown:cc.tween(this.finger).to(.2,{position:e}).call(function(){cc.tween(s.finger).delay(1).to(1,{y:e.y+100}).to(1,{y:e.y-100}).to(1,{y:e.y+100}).to(1,{y:e.y-100}).union().repeatForever().start()}).start();break;case n.leftAndRight:cc.tween(this.finger).to(.2,{position:cc.v3(e.x-100,e.y)}).call(function(){cc.tween(s.finger).delay(1).to(1,{x:e.x+100}).to(1,{x:e.x-100}).to(1,{x:e.x+100}).to(1,{x:e.x-100}).union().repeatForever().start()}).start()}},e.prototype.showFingerZoom=function(t){this.fingerZoom.active=t},e.prototype.showTips=function(t,e,i,o){var n=this;void 0===i&&(i=null),void 0===o&&(o=null),this.obstruct=!0,this.enabledTouch(!0),this.talkEndCB=i,this.clickEndCB=o;var s=this.text.node.parent;s.active=!0,s.stopAllActions(),this.text.string="",cc.tween(s).sequence(cc.moveTo(.2,cc.v2(0,s.y)),cc.callFunc(function(){n.obstruct=!1,n.strList=l(t),n.strIdx=0,n.audioIdx=e,n.showText(n.strList[n.strIdx],!0)})).start()},e.prototype.closeTips=function(t){var e=this,i=this.text.node.parent;cc.tween(i).sequence(cc.moveTo(.2,cc.v2(-720,i.y)),cc.callFunc(function(){e.strList=[],e.strIdx=0,e.enabledTouch(!1),i.active=!1,e.setTipsY(260),t&&t()})).start()},e.prototype.setTipsY=function(t){this.text.node.parent.y=t},e.prototype.click=function(){this.obstruct||(this.text.string==this.strList[this.strIdx]?this.strList.length-1==this.strIdx?this.clickEndCB&&this.clickEndCB():(this.strIdx++,this.showText(this.strList[this.strIdx],!0)):this.strList.length>0&&this.showText(this.strList[this.strIdx],!1))},e.prototype.showText=function(t,e){var i=this;if(void 0===e&&(e=!1),this.text.node.parent.active=!0,this.text.node.stopAllActions(),e){var o=t.split(""),n=0;cc.tween(this.text.node).sequence(cc.delayTime(.05),cc.callFunc(function(){n++,i.text.string=o.slice(0,n).join(""),i.text.string==i.strList[i.strList.length-1]&&i.talkEndCB&&cc.tween(i.text.node).delay(1).call(i.talkEndCB).start()})).repeat(t.length).start()}else this.text.string=t,this.talkEndCB&&this.talkEndCB()},e.inst=null,a([u(cc.Node)],e.prototype,"mask",void 0),a([u(cc.Node)],e.prototype,"frame",void 0),a([u(cc.Node)],e.prototype,"touch",void 0),a([u({type:cc.Node,tooltip:"\u9ad8\u4eae\u6846\u7684\u89e6\u6478\u62e6\u622a"})],e.prototype,"highlightInterceptTouch",void 0),a([u(cc.Node)],e.prototype,"finger",void 0),a([u(cc.Node)],e.prototype,"fingerZoom",void 0),a([u(cc.Label)],e.prototype,"text",void 0),a([u(cc.Sprite)],e.prototype,"npc",void 0),a([u(cc.SpriteFrame)],e.prototype,"npcSp",void 0),i=a([h],e)}(cc.Component);s.default=p,cc._RF.pop()},{}],InterstitialAdModule:[function(t,e,i){"use strict";cc._RF.push(e,"b561dacKgJCLZUxj3py+J3G","InterstitialAdModule");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0});var s=o("AdDeclare"),r=function(){function t(){this.adPositionId="",this.adObj=null,this.loaded=!1,this.adResultCallback=null,this.count=0}return t.prototype.createAd=function(t){this.count=0,this.adObj&&this.destroyAd(),this.adPositionId=t,this.create_()},t.prototype.create_=function(){var t,e,i,o,n,s,r,a,c;this.adObj=null===(t=null===PLATFORM||void 0===PLATFORM?void 0:PLATFORM.createInterstitialAd)||void 0===t?void 0:t.call(PLATFORM,{adUnitId:this.adPositionId}),this.adObj&&(console.log("create InterstitialAd:",this.adPositionId),null===(i=(e=this.adObj).onClose)||void 0===i||i.call(e,this.onClose_.bind(this)),null===(n=(o=this.adObj).onError)||void 0===n||n.call(o,this.onError_.bind(this)),null===(r=(s=this.adObj).onLoad)||void 0===r||r.call(s,this.onLoad_.bind(this)),(window.tt||window.qg)&&(null===(c=(a=this.adObj).load)||void 0===c||c.call(a)))},t.prototype.showAd=function(t,e){this.adResultCallback=t,e&&(this.adPositionId=e),this.loaded?this.show_():this.createAd(this.adPositionId)},t.prototype.show_=function(){var t=this;console.log("Show InterstitialAd"),this.adObj.show().then(function(){console.log("InterstitialAd show success.")}).catch(function(e){console.log("InterstitialAd show failed",e?JSON.stringify(e):e),t.createAd(t.adPositionId),t.adResultCallback&&(t.adResultCallback(s.AdResultState.ON_ERROR),t.adResultCallback=null)})},t.prototype.onLoad_=function(){console.log("InterstitialAd onLoad success"),this.loaded=!0},t.prototype.onError_=function(t){var e=this;this.adObj&&(console.log("InterstitialAd onError",t?JSON.stringify(t):t),this.adResultCallback&&(this.adResultCallback(s.AdResultState.ON_ERROR),this.adResultCallback=null),this.loaded=!1,this.destroyAd(),this.count<3&&(this.count++,setTimeout(function(){e.create_()},5e3)))},t.prototype.onClose_=function(){console.log("InterstitialAd onClose"),this.adResultCallback&&(this.adResultCallback(s.AdResultState.ON_CLOSE_FINISH),this.adResultCallback=null),XIAOMI_GAME||(this.loaded=!1),window.qg&&this.createAd(this.adPositionId)},t.prototype.destroyAd=function(){var t,e,i,o,n,s,r,a;this.adObj&&(console.log("InterstitialAd destroyAd"),null===(e=(t=this.adObj).offLoad)||void 0===e||e.call(t,this.onLoad_.bind(this)),null===(o=(i=this.adObj).offError)||void 0===o||o.call(i,this.onError_.bind(this)),null===(s=(n=this.adObj).offClose)||void 0===s||s.call(n,this.onClose_.bind(this)),null===(a=(r=this.adObj).destroy)||void 0===a||a.call(r),this.adObj=null)},t.inst=new t,t}();n.default=r.inst,cc._RF.pop()},{}],ListItem:[function(t,e,i){"use strict";cc._RF.push(e,"b73818KWvVFEaMcLnpQK1xE","ListItem");var o,n=i,s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a,c=cc._decorator,l=c.ccclass,d=c.property,h=c.disallowMultiple,u=c.menu,p=c.executionOrder;(function(t){t[t.NONE=0]="NONE",t[t.TOGGLE=1]="TOGGLE",t[t.SWITCH=2]="SWITCH"})(a||(a={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.title=null,e.selectedMode=a.NONE,e.selectedFlag=null,e.selectedSpriteFrame=null,e._unselectedSpriteFrame=null,e.adaptiveSize=!1,e._selected=!1,e._eventReg=!1,e}return s(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case a.TOGGLE:this.selectedFlag.active=t;break;case a.SWITCH:var e=this.selectedFlag.getComponent(cc.Sprite);e&&(e.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){if(this.selectedMode==a.SWITCH){var t=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=t.spriteFrame}},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},e.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},e.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},e.prototype.createEvt=function(t,e,i){if(void 0===i&&(i=null),t.isValid){t.comName=t.comName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var o=new cc.Component.EventHandler;return o.target=i||t.node,o.component=t.comName,o.handler=e,o}},e.prototype.showAni=function(t,e,i){var o,n=this;switch(t){case 0:o=cc.tween(n.node).to(.2,{scale:.7}).by(.3,{y:2*n.node.height});break;case 1:o=cc.tween(n.node).to(.2,{scale:.7}).by(.3,{x:2*n.node.width});break;case 2:o=cc.tween(n.node).to(.2,{scale:.7}).by(.3,{y:-2*n.node.height});break;case 3:o=cc.tween(n.node).to(.2,{scale:.7}).by(.3,{x:-2*n.node.width});break;default:o=cc.tween(n.node).to(.3,{scale:.1})}(e||i)&&o.call(function(){if(i){n.list._delSingleItem(n.node);for(var t=n.list.displayData.length-1;t>=0;t--)if(n.list.displayData[t].id==n.listId){n.list.displayData.splice(t,1);break}}e()}),o.start()},e.prototype.onClickThis=function(){this.list.selectedId=this.listId},r([d({type:cc.Sprite})],e.prototype,"icon",void 0),r([d({type:cc.Node})],e.prototype,"title",void 0),r([d({type:cc.Enum(a)})],e.prototype,"selectedMode",void 0),r([d({type:cc.Node,visible:function(){return this.selectedMode>a.NONE}})],e.prototype,"selectedFlag",void 0),r([d({type:cc.SpriteFrame,visible:function(){return this.selectedMode==a.SWITCH}})],e.prototype,"selectedSpriteFrame",void 0),r([d({})],e.prototype,"adaptiveSize",void 0),r([l,h(),u("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),p(-5001)],e)}(cc.Component);n.default=f,cc._RF.pop()},{}],List:[function(t,e,i){"use strict";cc._RF.push(e,"eec35DjEExMu7wn3xGbu0eF","List");var o,n=t,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(s,"__esModule",{value:!0});var c,l,d,h=cc._decorator,u=h.ccclass,p=h.property,f=h.disallowMultiple,_=h.menu,y=h.executionOrder,v=h.requireComponent,m=n("ListItem");(function(t){t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB"})(c||(c={})),function(t){t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE"}(l||(l={})),function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT"}(d||(d={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateType=c.NODE,e.tmpNode=null,e.tmpPrefab=null,e._slideMode=l.NORMAL,e.pageDistance=.3,e.pageChangeEvent=new cc.Component.EventHandler,e._virtual=!0,e.cyclic=!1,e.lackCenter=!1,e.lackSlide=!1,e._updateRate=0,e.frameByFrameRenderNum=0,e.renderEvent=new cc.Component.EventHandler,e.selectedMode=d.NONE,e.repeatEventSingle=!1,e.selectedEvent=new cc.Component.EventHandler,e._selectedId=-1,e._forceUpdate=!1,e._updateDone=!0,e._numItems=0,e._inited=!1,e._needUpdateWidget=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e.adhering=!1,e._adheringBarrier=!1,e.curPageNum=0,e}return r(e,t),Object.defineProperty(e.prototype,"slideMode",{get:function(){return this._slideMode},set:function(t){this._slideMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"virtual",{get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateRate",{get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedId",{get:function(){return this._selectedId},set:function(t){var e,i=this;switch(i.selectedMode){case d.SINGLE:if(!i.repeatEventSingle&&t==i._selectedId)return;e=i.getItemByListId(t);var o=void 0;if(i._selectedId>=0?i._lastSelectedId=i._selectedId:i._lastSelectedId=null,i._selectedId=t,e&&((o=e.getComponent(m.default)).selected=!0),i._lastSelectedId>=0&&i._lastSelectedId!=i._selectedId){var n=i.getItemByListId(i._lastSelectedId);n&&(n.getComponent(m.default).selected=!1)}i.selectedEvent&&cc.Component.EventHandler.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems);break;case d.MULT:if(!(e=i.getItemByListId(t)))return;o=e.getComponent(m.default),i._selectedId>=0&&(i._lastSelectedId=i._selectedId),i._selectedId=t;var s=!o.selected;o.selected=s;var r=i.multSelected.indexOf(t);s&&r<0?i.multSelected.push(t):!s&&r>=0&&i.multSelected.splice(r,1),i.selectedEvent&&cc.Component.EventHandler.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems,s)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(t){var e=this;if(e.checkInited(!1))if(null==t||t<0)cc.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=l.PAGE||(e.curPageNum=e.nearestListId);else{e.cyclic&&(e._resizeContent(),e._numItems=e._cyclicNum*e._numItems);var i=e.content.getComponent(cc.Layout);if(i&&(i.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){for(var o=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,n=0;n<o;n++)e._createOrUpdateItem2(n);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(n=0;n<e._numItems;n++)e._createOrUpdateItem2(n);e.displayItemNum=e._numItems}}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._init()},e.prototype.onDestroy=function(){var t=this;cc.isValid(t._itemTmp)&&t._itemTmp.destroy(),cc.isValid(t.tmpNode)&&t.tmpNode.destroy(),t._pool&&t._pool.clear()},e.prototype.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},e.prototype.onDisable=function(){this._unregisterEvent()},e.prototype._registerEvent=function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.on("touch-up",t._onTouchUp,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.on("scroll-began",t._onScrollBegan,t,!0),t.node.on("scroll-ended",t._onScrollEnded,t,!0),t.node.on("scrolling",t._onScrolling,t,!0),t.node.on(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._unregisterEvent=function(){var t=this;t.node.off(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.off("touch-up",t._onTouchUp,t),t.node.off(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.off("scroll-began",t._onScrollBegan,t,!0),t.node.off("scroll-ended",t._onScrollEnded,t,!0),t.node.off("scrolling",t._onScrolling,t,!0),t.node.off(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._init=function(){var t=this;if(!t._inited)if(t._scrollView=t.node.getComponent(cc.ScrollView),t.content=t._scrollView.content,t.content){switch(t._layout=t.content.getComponent(cc.Layout),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(cc.instantiate(t.templateType==c.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=l.ADHERING&&t._slideMode!=l.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new cc.NodePool,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case cc.Layout.Type.HORIZONTAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else cc.error(t.node.name+"'s cc.ScrollView unset content!")},e.prototype._processAutoScrolling=function(t){this._scrollView._autoScrollAccumulatedTime+=1*t;var e=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var i=e-1;e=i*i*i*i*i+1}var o=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(e)),n=this._scrollView.getScrollEndedEventTiming(),s=Math.abs(e-1)<=n;Math.abs(e-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),s&&(this._scrollView._autoScrolling=!1);var r=o.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(r),s),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},e.prototype.setTemplateItem=function(t){if(t){var e=this;e._itemTmp=t,e._resizeMode==cc.Layout.ResizeMode.CHILDREN?e._itemSize=e._layout.cellSize:e._itemSize=cc.size(t.width,t.height);var i=t.getComponent(m.default),o=!1;switch(i||(o=!0),o&&(e.selectedMode=d.NONE),(i=t.getComponent(cc.Widget))&&i.enabled&&(e._needUpdateWidget=!0),e.selectedMode==d.MULT&&(e.multSelected=[]),e._align){case cc.Layout.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case cc.Layout.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var n=e.content.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((n+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var s=e.content.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((s+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}},e.prototype.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&cc.error("List initialization not completed!"),!1)},e.prototype._resizeContent=function(){var t,e=this;switch(e._align){case cc.Layout.Type.HORIZONTAL:if(e._customSize){var i=e._getFixedSize(null);t=e._leftGap+i.val+e._itemSize.width*(e._numItems-i.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case cc.Layout.Type.VERTICAL:e._customSize?(i=e._getFixedSize(null),t=e._topGap+i.val+e._itemSize.height*(e._numItems-i.count)+e._lineGap*(e._numItems-1)+e._bottomGap):t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case cc.Layout.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var o=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*o+e._lineGap*(o-1)+e._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var n=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*n+e._columnGap*(n-1)+e._rightGap}}var s=e.content.getComponent(cc.Layout);if(s&&(s.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){var r=e._sizeType?e.node.height:e.node.width;e._cyclicPos1=0,r-=e._cyclicPos1,e._cyclicNum=Math.ceil(r/e._allItemSizeNoEdge)+1;var a=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+a,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+a*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=a*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e.node.height:e.node.width);var c=e._lack&&e.lackCenter||!e.lackSlide?.1:0,l=e._lack?(e._sizeType?e.node.height:e.node.width)-c:e.cyclic?e._cyclicAllItemSize:e._allItemSize;l<0&&(l=0),e._sizeType?e.content.height=l:e.content.width=l},e.prototype._onScrolling=function(t){if(void 0===t&&(t=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.content.getPosition();e=this._sizeType?e.y:e.x;var i=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),o=this._sizeType?cc.v2(0,i):cc.v2(i,0);switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):e<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)));break;case 2:e<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):e>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 3:e<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):e>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 4:e>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):e<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)))}}var n,s,r,a;if(this._calcViewPos(),this._sizeType?(n=this.viewTop,r=this.viewBottom):(s=this.viewRight,a=this.viewLeft),this._virtual){this.displayData=[];var c=void 0,l=0,d=this._numItems-1;if(this._customSize)for(var h=!1;l<=d&&!h;l++)switch(c=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:c.right>=a&&c.left<=s?this.displayData.push(c):0!=l&&this.displayData.length>0&&(h=!0);break;case cc.Layout.Type.VERTICAL:c.bottom<=n&&c.top>=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(h=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:c.bottom<=n&&c.top>=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(h=!0);break;case cc.Layout.AxisDirection.VERTICAL:c.right>=a&&c.left<=s?this.displayData.push(c):0!=l&&this.displayData.length>0&&(h=!0)}}else{var u=this._itemSize.width+this._columnGap,p=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(a-this._leftGap)/u,d=(s-this._leftGap)/u;break;case 2:l=(-s-this._rightGap)/u,d=(-a-this._rightGap)/u;break;case 3:l=(-n-this._topGap)/p,d=(-r-this._topGap)/p;break;case 4:l=(r-this._bottomGap)/p,d=(n-this._bottomGap)/p}for(l=Math.floor(l)*this._colLineNum,d=Math.ceil(d)*this._colLineNum,l<0&&(l=0),--d>=this._numItems&&(d=this._numItems-1);l<=d;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var f=this._lastDisplayData.length,_=this.displayItemNum!=f;if(_&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(t,e){return t-e}),_=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[f-1]),this._forceUpdate||_)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var y=0;y<this.displayItemNum;y++)this._createOrUpdateItem(this.displayData[y]);this._forceUpdate=!1}this._calcNearestItem()}}},e.prototype._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},e.prototype._calcItemPos=function(t){var e,i,o,n,s,r,a,c;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(t);s=this._leftGap+(this._itemSize.width+this._columnGap)*(t-l.count)+(l.val+this._columnGap*l.count),e=(d=this._customSize[t])>0?d:this._itemSize.width}else s=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;return this.lackCenter&&(s-=this._leftGap,s+=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,left:s,right:r=s+e,x:s+this._itemTmp.anchorX*e,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this._customSize?(l=this._getFixedSize(t),r=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-l.count)-(l.val+this._columnGap*l.count),e=(d=this._customSize[t])>0?d:this._itemSize.width):(r=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width),this.lackCenter&&(r+=this._rightGap,r-=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,right:r,left:s=r-e,x:s+this._itemTmp.anchorX*e,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(l=this._getFixedSize(t),o=-this._topGap-(this._itemSize.height+this._lineGap)*(t-l.count)-(l.val+this._lineGap*l.count),i=(d=this._customSize[t])>0?d:this._itemSize.height):(o=-this._topGap-(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height),this.lackCenter&&(o+=this._topGap,o-=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:o,bottom:n=o-i,x:this._itemTmp.x,y:n+this._itemTmp.anchorY*i};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var d;return this._customSize?(l=this._getFixedSize(t),n=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-l.count)+(l.val+this._lineGap*l.count),i=(d=this._customSize[t])>0?d:this._itemSize.height):(n=this._bottomGap+(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height),this.lackCenter&&(n-=this._bottomGap,n+=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:o=n+i,bottom:n,x:this._itemTmp.x,y:n+this._itemTmp.anchorY*i}}case cc.Layout.Type.GRID:var h=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(n=(o=-this._topGap-(this._itemSize.height+this._lineGap)*h)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:o=(n=this._bottomGap+(this._itemSize.height+this._lineGap)*h)+this._itemSize.height,c=n+this._itemTmp.anchorY*this._itemSize.height}switch(a=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:a+=this._itemTmp.anchorX*this._itemSize.width,a-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:a+=(1-this._itemTmp.anchorX)*this._itemSize.width,a-=(1-this.content.anchorX)*this.content.width,a*=-1}return{id:t,top:o,bottom:n,x:a,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:r=(s=this._leftGap+(this._itemSize.width+this._columnGap)*h)+this._itemSize.width,a=s+this._itemTmp.anchorX*this._itemSize.width,a-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:a=(s=(r=-this._rightGap-(this._itemSize.width+this._columnGap)*h)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,a+=(1-this.content.anchorX)*this.content.width}switch(c=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1}return{id:t,left:s,right:r,x:a,y:c}}}},e.prototype._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var i={id:t,x:e.x,y:e.y};return this._sizeType?(i.top=e.y+e.height*(1-e.anchorY),i.bottom=e.y-e.height*e.anchorY):(i.left=e.x-e.width*e.anchorX,i.right=e.x+e.width*(1-e.anchorX)),i},e.prototype.getItemPos=function(t){return this._virtual?this._calcItemPos(t):this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},e.prototype._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,i=0;for(var o in this._customSize)parseInt(o)<t&&(e+=this._customSize[o],i++);return{val:e,count:i}},e.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},e.prototype._onScrollEnded=function(){var t=this;if(t.curScrollIsTouch=!1,null!=t.scrollToListId){var e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&cc.tween(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}t._onScrolling(),t._slideMode!=l.ADHERING||t.adhering?t._slideMode==l.PAGE&&(null!=t._beganPos&&t.curScrollIsTouch?this._pageAdhere():t.adhere()):t.adhere()},e.prototype._onTouchStart=function(t,e){if(!(this._scrollView.hasNestedViewGroup&&this._scrollView.hasNestedViewGroup(t,e)||this._scrollView._hasNestedViewGroup&&this._scrollView.hasNestedViewGroup(t,e)||(this.curScrollIsTouch=!0,t.eventPhase===cc.Event.AT_TARGET&&t.target===this.node))){for(var i=t.target;null==i._listId&&i.parent;)i=i.parent;this._scrollItem=null!=i._listId?i:t.target}},e.prototype._onTouchUp=function(){var t=this;t._scrollPos=null,t._slideMode==l.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==l.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null},e.prototype._onTouchCancelled=function(t,e){var i=this;i._scrollView.hasNestedViewGroup&&(i._scrollView.hasNestedViewGroup(t,e)||t.simulate)||i._scrollView._hasNestedViewGroup&&(i._scrollView.hasNestedViewGroup(t,e)||t.simulate)||(i._scrollPos=null,i._slideMode==l.ADHERING?(i.adhering&&(i._adheringBarrier=!0),i.adhere()):i._slideMode==l.PAGE&&(null!=i._beganPos?i._pageAdhere():i.adhere()),this._scrollItem=null)},e.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},e.prototype._onItemAdaptive=function(t){if(!this._sizeType&&t.width!=this._itemSize.width||this._sizeType&&t.height!=this._itemSize.height){this._customSize||(this._customSize={});var e=this._sizeType?t.height:t.width;this._customSize[t._listId]!=e&&(this._customSize[t._listId]=e,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},e.prototype._pageAdhere=function(){var t=this;if(t.cyclic||!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){var e=t._sizeType?t.viewTop:t.viewLeft,i=(t._sizeType?t.node.height:t.node.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>i)switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(.5):t.nextPage(.5);break;case 2:case 3:t._beganPos<e?t.prePage(.5):t.nextPage(.5)}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}},e.prototype.adhere=function(){var t=this;if(t.checkInited()&&!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){t.adhering=!0,t._calcNearestItem();var e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t.node.height:t.node.width);t.scrollTo(t.nearestListId,.7,e)}},e.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var i=this.displayData[e];i&&this._createOrUpdateItem(i)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==l.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==l.PAGE&&(this.curPageNum=this.nearestListId)},e.prototype._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{var i=this._pool.size()>0;if(e=i?this._pool.get():cc.instantiate(this._itemTmp),i&&cc.isValid(e)||(e=cc.instantiate(this._itemTmp),i=!1),e._listId!=t.id&&(e._listId=t.id,e.setContentSize(this._itemSize)),e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.content.addChild(e),i&&this._needUpdateWidget){var o=e.getComponent(cc.Widget);o&&o.updateAlignment()}e.setSiblingIndex(this.content.childrenCount-1);var n=e.getComponent(m.default);e.listItem=n,n&&(n.listId=t.id,n.list=this,n._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},e.prototype._createOrUpdateItem2=function(t){var e,i=this.content.children[t];i?this._forceUpdate&&this.renderEvent&&(i._listId=t,e&&(e.listId=t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,t%this._actualNumItems)):((i=cc.instantiate(this._itemTmp))._listId=t,this.content.addChild(i),e=i.getComponent(m.default),i.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,t%this._actualNumItems)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},e.prototype._updateListItem=function(t){if(t&&this.selectedMode>d.NONE){var e=t.node;switch(this.selectedMode){case d.SINGLE:t.selected=this.selectedId==e._listId;break;case d.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}},e.prototype._resetItemSize=function(){},e.prototype._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t),i=this.getItemPos(e._listId);e.setPosition(i.x,i.y)},e.prototype.setMultSelected=function(t,e){var i=this;if(i.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)i.multSelected=t;else{var o=void 0,n=void 0;if(e)for(var s=t.length-1;s>=0;s--)o=t[s],(n=i.multSelected.indexOf(o))<0&&i.multSelected.push(o);else for(s=t.length-1;s>=0;s--)o=t[s],(n=i.multSelected.indexOf(o))>=0&&i.multSelected.splice(n,1)}i._forceUpdate=!0,i._onScrolling()}},e.prototype.getMultSelected=function(){return this.multSelected},e.prototype.hasMultSelected=function(t){return this.multSelected&&this.multSelected.indexOf(t)>=0},e.prototype.updateItem=function(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var o=t[e],n=this.getItemByListId(o);n&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,o%this._actualNumItems)}}},e.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},e.prototype.getItemByListId=function(t){if(this.content)for(var e=this.content.childrenCount-1;e>=0;e--){var i=this.content.children[e];if(i._listId==t)return i}},e.prototype._getOutsideItem=function(){for(var t,e=[],i=this.content.childrenCount-1;i>=0;i--)t=this.content.children[i],this.displayData.find(function(e){return e.id==t._listId})||e.push(t);return e},e.prototype._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var i=t[e];if(!this._scrollItem||i._listId!=this._scrollItem._listId){i.isCached=!0,this._pool.put(i);for(var o=this._lastDisplayData.length-1;o>=0;o--)if(this._lastDisplayData[o]==i._listId){this._lastDisplayData.splice(o,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},e.prototype._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},e.prototype.aniDelItem=function(t,e,i){var o=this;if(!o.checkInited()||o.cyclic||!o._virtual)return cc.error("This function is not allowed to be called!");if(!e)return cc.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(o._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var n,s=o.getItemByListId(t);if(s){n=s.getComponent(m.default),o._aniDelRuning=!0,o._aniDelCB=e,o._aniDelItem=s,o._aniDelBeforePos=s.position,o._aniDelBeforeScale=s.scale;var r=o.displayData[o.displayData.length-1].id,a=n.selected;n.showAni(i,function(){var i,n,c;if(r<o._numItems-2&&(i=r+1),null!=i){var l=o._calcItemPos(i);o.displayData.push(l),o._virtual?o._createOrUpdateItem(l):o._createOrUpdateItem2(i)}else o._numItems--;if(o.selectedMode==d.SINGLE)a?o._selectedId=-1:o._selectedId-1>=0&&o._selectedId--;else if(o.selectedMode==d.MULT&&o.multSelected.length){var h=o.multSelected.indexOf(t);h>=0&&o.multSelected.splice(h,1);for(var u=o.multSelected.length-1;u>=0;u--)(_=o.multSelected[u])>=t&&o.multSelected[u]--}if(o._customSize){o._customSize[t]&&delete o._customSize[t];var p={},f=void 0;for(var _ in o._customSize){f=o._customSize[_];var y=parseInt(_);p[y-(y>=t?1:0)]=f}o._customSize=p}for(u=null!=i?i:r;u>=t+1;u--)if(s=o.getItemByListId(u)){var v=o._calcItemPos(u-1);n=cc.tween(s).to(.2333,{position:cc.v2(v.x,v.y)}),u<=t+1&&(c=!0,n.call(function(){o._aniDelRuning=!1,e(t),delete o._aniDelCB})),n.start()}c||(o._aniDelRuning=!1,e(t),o._aniDelCB=null)},!0)}else e(t)},e.prototype.scrollTo=function(t,e,i,o){void 0===e&&(e=.5),void 0===i&&(i=null),void 0===o&&(o=!1);var n=this;if(n.checkInited(!1)){null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=n._numItems&&(t=n._numItems-1),!n._virtual&&n._layout&&n._layout.enabled&&n._layout.updateLayout();var s,r,a=n.getItemPos(t);if(!a)return!1;switch(n._alignCalcType){case 1:s=a.left,s-=null!=i?n.node.width*i:n._leftGap,a=cc.v2(s,0);break;case 2:s=a.right-n.node.width,s+=null!=i?n.node.width*i:n._rightGap,a=cc.v2(s+n.content.width,0);break;case 3:r=a.top,r+=null!=i?n.node.height*i:n._topGap,a=cc.v2(0,-r);break;case 4:r=a.bottom+n.node.height,r-=null!=i?n.node.height*i:n._bottomGap,a=cc.v2(0,-r+n.content.height)}var c=n.content.getPosition();c=Math.abs(n._sizeType?c.y:c.x);var l=n._sizeType?a.y:a.x;Math.abs((null!=n._scrollPos?n._scrollPos:c)-l)>.5&&(n._scrollView.scrollToOffset(a,e),n._scrollToListId=t,n._scrollToEndTime=(new Date).getTime()/1e3+e,n._scrollToSo=n.scheduleOnce(function(){if(n._adheringBarrier||(n.adhering=n._adheringBarrier=!1),n._scrollPos=n._scrollToListId=n._scrollToEndTime=n._scrollToSo=null,o){var e=n.getItemByListId(t);e&&cc.tween(e).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}},e+.1),e<=0&&n._onScrolling())}},e.prototype._calcNearestItem=function(){var t,e,i,o,n,s,r=this;r.nearestListId=null,r._virtual&&r._calcViewPos(),i=r.viewTop,o=r.viewRight,n=r.viewBottom,s=r.viewLeft;for(var a=!1,c=0;c<r.content.childrenCount&&!a;c+=r._colLineNum)if(t=r._virtual?r.displayData[c]:r._calcExistItemPos(c))switch(e=r._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,r._alignCalcType){case 1:t.right>=s&&(r.nearestListId=t.id,s>e&&(r.nearestListId+=r._colLineNum),a=!0);break;case 2:t.left<=o&&(r.nearestListId=t.id,o<e&&(r.nearestListId+=r._colLineNum),a=!0);break;case 3:t.bottom<=i&&(r.nearestListId=t.id,i<e&&(r.nearestListId+=r._colLineNum),a=!0);break;case 4:t.top>=n&&(r.nearestListId=t.id,n>e&&(r.nearestListId+=r._colLineNum),a=!0)}if((t=r._virtual?r.displayData[r.displayItemNum-1]:r._calcExistItemPos(r._numItems-1))&&t.id==r._numItems-1)switch(e=r._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,r._alignCalcType){case 1:o>e&&(r.nearestListId=t.id);break;case 2:s<e&&(r.nearestListId=t.id);break;case 3:n<e&&(r.nearestListId=t.id);break;case 4:i>e&&(r.nearestListId=t.id)}},e.prototype.prePage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t)},e.prototype.nextPage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t)},e.prototype.skipPage=function(t,e){var i=this;if(i.checkInited())return i._slideMode!=l.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=i._numItems||i.curPageNum!=t&&(i.curPageNum=t,i.pageChangeEvent&&cc.Component.EventHandler.emitEvents([i.pageChangeEvent],t),i.scrollTo(t,e)))},e.prototype.calcCustomSize=function(t){var e=this;if(e.checkInited()){if(!e._itemTmp)return cc.error("Unset template item!");if(!e.renderEvent)return cc.error("Unset Render-Event!");e._customSize={};var i=cc.instantiate(e._itemTmp);e.content.addChild(i);for(var o=0;o<t;o++)cc.Component.EventHandler.emitEvents([e.renderEvent],i,o),i.height==e._itemSize.height&&i.width==e._itemSize.width||(e._customSize[o]=e._sizeType?i.height:i.width);return Object.keys(e._customSize).length||(e._customSize=null),i.removeFromParent(),i.destroy&&i.destroy(),e._customSize}},a([p({type:cc.Enum(c)})],e.prototype,"templateType",void 0),a([p({type:cc.Node,visible:function(){return this.templateType==c.NODE}})],e.prototype,"tmpNode",void 0),a([p({type:cc.Prefab,visible:function(){return this.templateType==c.PREFAB}})],e.prototype,"tmpPrefab",void 0),a([p()],e.prototype,"_slideMode",void 0),a([p({type:cc.Enum(l)})],e.prototype,"slideMode",null),a([p({type:cc.Float,range:[0,1,.1],slide:!0,visible:function(){return this._slideMode==l.PAGE}})],e.prototype,"pageDistance",void 0),a([p({type:cc.Component.EventHandler,visible:function(){return this._slideMode==l.PAGE}})],e.prototype,"pageChangeEvent",void 0),a([p()],e.prototype,"_virtual",void 0),a([p({type:cc.Boolean})],e.prototype,"virtual",null),a([p({visible:function(){var t=this.slideMode==l.NORMAL;return t||(this.cyclic=!1),t}})],e.prototype,"cyclic",void 0),a([p({visible:function(){return this.virtual}})],e.prototype,"lackCenter",void 0),a([p({visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}})],e.prototype,"lackSlide",void 0),a([p({type:cc.Integer})],e.prototype,"_updateRate",void 0),a([p({type:cc.Integer,range:[0,6,1],slide:!0})],e.prototype,"updateRate",null),a([p({type:cc.Integer,range:[0,12,1],slide:!0})],e.prototype,"frameByFrameRenderNum",void 0),a([p({type:cc.Component.EventHandler})],e.prototype,"renderEvent",void 0),a([p({type:cc.Enum(d)})],e.prototype,"selectedMode",void 0),a([p({visible:function(){return this.selectedMode==d.SINGLE}})],e.prototype,"repeatEventSingle",void 0),a([p({type:cc.Component.EventHandler,visible:function(){return this.selectedMode>d.NONE}})],e.prototype,"selectedEvent",void 0),a([p({serializable:!1})],e.prototype,"_numItems",void 0),a([u,f(),_("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),v(cc.ScrollView),y(-5e3)],e)}(cc.Component);s.default=g,cc._RF.pop()},{}],LoadLayer:[function(t,e,i){"use strict";cc._RF.push(e,"2c108snMHVGyZ94j6mfDSSw","LoadLayer");var o,n=t,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},c=function(t,e,i,o){return new(i||(i=Promise))(function(n,s){function r(t){try{c(o.next(t))}catch(e){s(e)}}function a(t){try{c(o.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,a)}c((o=o.apply(t,e||[])).next())})},l=function(t,e){var i,o,n,s,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return c([t,e])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){r.label=s[1];break}if(6===s[0]&&r.label<n[1]){r.label=n[1],n=s;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(s);break}n[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],o=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(s,"__esModule",{value:!0}),s.LoadLayer=void 0;var d=n("Constants"),h=n("UiUtil"),u=n("ShuFenReport"),p=n("LocalizedTextManager"),f=cc._decorator,_=f.ccclass,y=f.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipsLabel=null,e.loadingLabel=null,e.loadingProgress=null,e.sheepParent=null,e.jsonText=null,e.loadingTime=0,e.tipsUpdateTimer=0,e}var i;return r(e,t),i=e,e.setMaxProgress=function(t){i.maxProgress_=t},e.openLoading=function(){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return i.loadLayer||i.requestedOpen?[3,2]:(i.requestedOpen=!0,i.needClose=!1,[4,h.UiUtil.openModule("res/prefab/LoadLayer",cc.director.getScene()).then(function(t){cc.game.addPersistRootNode(t),i.loadLayer=t.getComponent(i),i.currentProgress_=0})]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.closeLoading=function(){if(i.loadLayer){if(d.default.ENTER_TIME>0){var t=Math.round((cc.sys.now()-d.default.ENTER_TIME)/1e3);u.default.reportLoad(!1,t),d.default.ENTER_TIME=0}i.loadLayer.node.active=!1,i.loadLayer.node.destroy(),i.loadLayer=null,i.requestedOpen=!1}else i.requestedOpen&&(i.needClose=!0)},e.prototype.start=function(){var t=this;this.loadingTime=0,this.scheduleOnce(function(){var e=p.LocalizedTextManager.getRandomLoadingTips();e&&(t.tipsLabel.string=e)},.1)},e.prototype.update=function(t){if(this.loadingTime+=t,this.tipsUpdateTimer+=t,(this.tipsUpdateTimer>6||""==this.tipsLabel.string)&&(this.tipsUpdateTimer=0,this.tipsLabel.string=p.LocalizedTextManager.getRandomLoadingTips()),i.currentProgress_<i.maxProgress_){i.currentProgress_+=.4;var e=i.currentProgress_/100;this.loadingProgress.progress=e}this.loadingLabel.string="\u6b63\u5728\u521d\u59cb\u5316\u6e38\u620f\uff0c\u8bf7\u7a0d\u540e "+i.dot[Math.floor(this.loadingTime/.3%4)];var o=this.sheepParent.angle;o+=45*t,this.sheepParent.angle=o,i.needClose&&i.closeLoading()},e.maxProgress_=95,e.currentProgress_=0,e.loadLayer=null,e.dot=["",".","..","..."],e.requestedOpen=!1,e.needClose=!1,a([y({type:cc.Label})],e.prototype,"tipsLabel",void 0),a([y({type:cc.Label})],e.prototype,"loadingLabel",void 0),a([y({type:cc.ProgressBar})],e.prototype,"loadingProgress",void 0),a([y({type:cc.Node,tooltip:"\u4f1a\u65cb\u8f6c\u7684\u8282\u70b9"})],e.prototype,"sheepParent",void 0),a([y(cc.JsonAsset)],e.prototype,"jsonText",void 0),i=a([_],e)}(cc.Component);s.LoadLayer=v,cc._RF.pop()},{}],LocalizedTextManager:[function(t,e,i){"use strict";cc._RF.push(e,"bcf68JdXiVGtYMdsRT63UNd","LocalizedTextManager");var o=t,n=i,s=function(t,e,i,o){return new(i||(i=Promise))(function(n,s){function r(t){try{c(o.next(t))}catch(e){s(e)}}function a(t){try{c(o.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,a)}c((o=o.apply(t,e||[])).next())})},r=function(t,e){var i,o,n,s,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return c([t,e])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){r.label=s[1];break}if(6===s[0]&&r.label<n[1]){r.label=n[1],n=s;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(s);break}n[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],o=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.LocalizedTextManager=void 0;var a=o("Constants"),c=o("ResMgr"),l=o("Log"),d=function(){function t(){}return Object.defineProperty(t,"isLoading",{get:function(){return t.isLoading_},enumerable:!1,configurable:!0}),t.loadLocalizedText=function(){return s(this,void 0,void 0,function(){var e;return r(this,function(i){switch(i.label){case 0:return e=a.default.LANGUAGE==a.LANGUAGE_TYPE.ZH?"res/config/cz":"res/config/en",[4,c.default.loadRes(e).then(function(e){t.localizedText=e.json,t.localizedText.loadingTips.shuffle(),t.isLoading_=!1})];case 1:return i.sent(),[2]}})})},t.contains=function(e){return!!t.localizedText[e]},t.getText=function(e){var i="";return t.contains(e)?i=t.localizedText[e]:(i=e,e.includes("_placeholder")?i="":l.default.d("LocalizedTextManager: missing text: "+e,i)),e.startsWith("world_law_",4)&&(i=i.replace("\n\n","\n")),i||"404"},t.getGodPowerName=function(e){return t.getText(e)},t.getGodPowerDesc=function(e){return t.getText(e+" Description")},t.getRandomLoadingTips=function(){var e,i="";return(null===(e=t.localizedText)||void 0===e?void 0:e.loadingTips)&&(i=t.localizedText.loadingTips[t.loadingTipsIndex],t.loadingTipsIndex++,t.loadingTipsIndex>=t.localizedText.loadingTips.length&&(t.localizedText.loadingTips.shuffle(),t.loadingTipsIndex=0)),i},t.getRandomTips=function(){var e,i="";return(null===(e=t.localizedText)||void 0===e?void 0:e.otherTips)&&(i=t.localizedText.otherTips[t.randomTipsIndex],t.randomTipsIndex++,t.randomTipsIndex>=t.localizedText.otherTips.length&&(t.localizedText.otherTips.shuffle(),t.randomTipsIndex=0)),i},t.localizedText={},t.loadingTipsIndex=0,t.randomTipsIndex=0,t.isLoading_=!0,t}();n.LocalizedTextManager=d,cc._RF.pop()},{}],MsgBox:[function(t,e,i){"use strict";cc._RF.push(e,"0b07a3XFMJBrZ90I0lpIki2","MsgBox");var o,n=t,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(s,"__esModule",{value:!0});var c=n("AudioMgr"),l=cc._decorator,d=l.ccclass,h=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.btnSure=null,e.btnOk=null,e.btnNo=null,e.callback=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.close=function(t,e){void 0===e&&(e="0"),c.default.playOpenEffect(),this.node.destroy(),this.callback&&this.callback(parseInt(e))},e.prototype.show=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!0),this.label.string=t,this.callback=e,this.btnSure.active=!i,this.btnOk.active=i,this.btnNo.active=i},a([h(cc.Label)],e.prototype,"label",void 0),a([h(cc.Node)],e.prototype,"btnSure",void 0),a([h(cc.Node)],e.prototype,"btnOk",void 0),a([h(cc.Node)],e.prototype,"btnNo",void 0),a([d],e)}(cc.Component);s.default=u,cc._RF.pop()},{}],MsgCache:[function(t,e,i){"use strict";cc._RF.push(e,"8a6cajqtS1KDJXYEaCnM6rU","MsgCache");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0});var s=o("Dialog"),r=o("Constants"),a=o("UiUtil"),c=function(){function t(){this.notice=[],this.toast=[]}return t.prototype.pushNotice=function(t){if(0==t.type)this.notice.unshift(t),(e=this.notice.length)>50&&this.notice.pop();else{var e;if((e=this.notice.length)>=5)for(var i=0;i<e;i++)if(1==this.notice[i].type){this.notice.splice(i,1),e-=1;break}e<5&&this.notice.push(t)}},t.prototype.popNotice=function(){return this.notice.length>=1?this.notice.shift():""},t.prototype.clearNotice=function(){this.notice=[]},t.prototype.pushToast=function(t){for(var e=0;e<this.toast.length;e++)if(this.toast[e]==t)return;this.toast.push(t)},t.prototype.popToast=function(){return this.toast.length>=1?this.toast.shift():""},t.prototype.getToastCount=function(){return this.toast.length},t.prototype.clear=function(){this.notice=[],this.toast=[]},t.prototype.showMsgBox=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!0),this.showDialog(t,e,i)},t.prototype.showDialog=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!0),a.UiUtil.openModule("res/prefab/Dialog",r.default.GLOBAL_NODE).then(function(o){o.position=cc.v3(cc.winSize.width/2,cc.winSize.height/2),o.zIndex=r.default.MAX_ZINDEX,o.getComponent(s.default).show(t,e,i)})},t.inst=new t,t}();n.default=c.inst,cc._RF.pop()},{}],NativeAdModule:[function(t,e,i){"use strict";cc._RF.push(e,"656ef3CVqtBP5kNLw6SxW0G","NativeAdModule");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0});var s=o("AdTools"),r=o("AdDeclare"),a=function(){function t(){this.nativeAdId="",this.adItem=null,this.nativeAd=null,this.callback=null}return t.prototype.create=function(t,e){var i,o,n,s,r,a,c;void 0===e&&(e=null),this.adItem=null,this.nativeAdId=t,this.callback=e,this.nativeAd&&this.destroyAd(),console.log("createNativeAdData:",t),(VIVO_GAME||OPPO_GAME||HUAWEI_GAME)&&(this.nativeAd=null===(i=null===qg||void 0===qg?void 0:qg.createNativeAd)||void 0===i?void 0:i.call(qg,{adUnitId:t})),this.nativeAd&&(null===(n=(o=this.nativeAd).onLoad)||void 0===n||n.call(o,this.onLoad_.bind(this)),null===(r=(s=this.nativeAd).onError)||void 0===r||r.call(s,this.onError_.bind(this)),null===(c=(a=this.nativeAd).load)||void 0===c||c.call(a))},t.prototype.onLoad_=function(t){if(null==t?void 0:t.adList){for(var e=0;e<t.adList.length;e++){var i=t.adList[e],o=new r.NativeAdItemModel(this.nativeAdId);o.init(i),this.adItem=o}this.reportAdShow()}else this.onError_(null);this.preloadImage(this.adItem),this.callback&&this.callback(this.adItem),console.log("NativeAd onLoad:",this.nativeAdId)},t.prototype.onError_=function(t){this.destroyAd(),this.callback&&this.callback(null),console.log("NativeAd onError:",t?JSON.stringify(t)+cc.sys.now():null)},t.prototype.preloadImage=function(){var t=s.default.checkImageUrl(this.adItem,!0),e=s.default.checkImageUrl(this.adItem,!1);cc.assetManager.loadRemote(t,function(){}),cc.assetManager.loadRemote(e,function(){})},t.prototype.reportAdShow=function(){if(this.nativeAd&&this.adItem){var t=this.adItem.adId;console.log("NativeAd reportAdShow ",t),this.nativeAd.reportAdShow({adId:t})}},t.prototype.reportAdClick=function(){if(this.nativeAd&&this.adItem){var t=this.adItem.adId;console.log("NativeAd reportAdClick ",t),this.nativeAd.reportAdClick({adId:t}),HUAWEI_GAME&&this.destroyAd()}},t.prototype.destroyAd=function(){var t,e,i,o,n,s;this.nativeAd&&(null===(e=(t=this.nativeAd).offLoad)||void 0===e||e.call(t),null===(o=(i=this.nativeAd).offError)||void 0===o||o.call(i),null===(s=(n=this.nativeAd).destroy)||void 0===s||s.call(n),this.nativeAd=null,this.adItem=null)},t}();n.default=a,cc._RF.pop()},{}],NativeBanner:[function(t,e,i){"use strict";cc._RF.push(e,"829d42FBjBJK7EgwaIz8xYy","NativeBanner");var o,n=t,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(s,"__esModule",{value:!0});var c=n("GlobalEvent"),l=n("Log"),d=n("AdsManager"),h=n("AdTools"),u=cc._decorator,p=u.ccclass,f=u.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=null,e.desc=null,e.btnText=null,e.icon=null,e.btnClose=null,e.adId="",e.isClick=!1,e}return r(e,t),e.prototype.start=function(){HUAWEI_GAME&&c.default.on(c.Global_Event_Type.BACKGROUND_TO_GAME,this.reportAdShow,this)},e.prototype.onDisable=function(){c.default.off(c.Global_Event_Type.BACKGROUND_TO_GAME,this)},e.prototype.show=function(t){var e=this;this.adId=t.adPositionId,this.title.string=t.title||"\u70b9\u51fb\u67e5\u770b",this.btnText.string=t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b";var i=t.desc||t.source;this.desc.string=i||"",this.icon.node.width=HUAWEI_GAME?160:90;var o=h.default.checkImageUrl(t,!0);l.default.v("NativeBanner:",o,this.title.string,this.desc.string),cc.assetManager.loadRemote(o,{ext:".png"},function(t,i){t?cc.error("\u5e7f\u544a\u56fe\u7247\u5c55\u793a\u9519\u8bef\uff1a",JSON.stringify(t)):cc.isValid(e.icon)&&(e.icon.spriteFrame=new cc.SpriteFrame(i))})},e.prototype.close=function(){this.node.destroy()},e.prototype.clickClose=function(){this.close()},e.prototype.clickAd=function(){this.isClick=!0,console.log("\u70b9\u51fb\u5e7f\u544a:",this.adId),d.default.reportNativeAdClick(this.adId),HUAWEI_GAME&&this.close()},e.prototype.reportAdShow=function(){d.default.reportNativeAdShow(this.adId)},a([f(cc.Label)],e.prototype,"title",void 0),a([f(cc.Label)],e.prototype,"desc",void 0),a([f(cc.Label)],e.prototype,"btnText",void 0),a([f(cc.Sprite)],e.prototype,"icon",void 0),a([f(cc.Node)],e.prototype,"btnClose",void 0),a([p],e)}(cc.Component);s.default=_,cc._RF.pop()},{}],NativeInterstitialAd:[function(t,e,i){"use strict";cc._RF.push(e,"9dc59XcPP1Al4T7HVVzUlf1","NativeInterstitialAd");var o,n=t,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(s,"__esModule",{value:!0});var c=n("GlobalEvent"),l=n("AudioMgr"),d=n("AdsManager"),h=n("AdTools"),u=cc._decorator,p=u.ccclass,f=u.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.desc=null,e.source=null,e.btnText=null,e.sprite=null,e.adId="",e.callback=null,e}return r(e,t),e.prototype.onLoad=function(){HUAWEI_GAME&&c.default.on(c.Global_Event_Type.BACKGROUND_TO_GAME,this.reportNativeAdShow,this)},e.prototype.onDisable=function(){c.default.off(c.Global_Event_Type.BACKGROUND_TO_GAME,this)},e.prototype.show=function(t,e){var i=this;void 0===e&&(e=null),this.adId=t.adPositionId,this.callback=e,this.btnText.string=t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b",this.source.string=t.source;var o=t.desc||"";this.desc.string=o;var n=h.default.checkImageUrl(t,!1);cc.assetManager.loadRemote(n,{ext:".png"},function(t,e){t?cc.error("\u5e7f\u544a\u56fe\u7247\u5c55\u793a\u9519\u8bef\uff1a",JSON.stringify(t)):cc.isValid(i.sprite)&&(i.sprite.spriteFrame=new cc.SpriteFrame(e))})},e.prototype.close=function(t){void 0===t&&(t=0),l.default.playOpenEffect(),this.callback&&this.callback(t),this.node.destroy()},e.prototype.click=function(){d.default.reportNativeAdClick(this.adId),this.close()},e.prototype.getReward=function(){this.close(1)},e.prototype.reportNativeAdShow=function(){d.default.reportNativeAdShow(this.adId)},a([f(cc.Label)],e.prototype,"desc",void 0),a([f(cc.Label)],e.prototype,"source",void 0),a([f(cc.Label)],e.prototype,"btnText",void 0),a([f(cc.Sprite)],e.prototype,"sprite",void 0),a([p],e)}(cc.Component);s.default=_,cc._RF.pop()},{}],PlatformAd:[function(t,e,i){"use strict";cc._RF.push(e,"ae880rhkFdM0IJeVhJGAs81","PlatformAd");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0}),n.AD_TYPE=void 0;var s,r=o("Constants"),a=(o("UserData"),o("GameTdd")),c=o("AppBoxAdModule"),l=o("BannerAdModule"),d=o("BoxBannerAdModule"),h=o("CustomAdModule"),u=o("GameScreenRecorder"),p=o("InterstitialAdModule"),f=o("NativeAdModule"),_=o("RewardedVideoModule"),y=o("ServerData");(function(t){t.banner="banner",t.boxBanner="boxBanner",t.video="video",t.native="native",t.custom="custom",t.insert="insert",t.appbox="appbox"})(s=n.AD_TYPE||(n.AD_TYPE={}));var v=function(){function t(){this.nativeAdModules={},this.nativeAdDatas=new Map,this.bannerAdModules={},this.requestID=new Map,this.adIndex={},this.config=null}return t.prototype.initAd=function(t){if(this.config=t,r.default.IS_AD_SHOW){var e=this.getAdId(s.insert);e&&p.default.createAd(e),_.default.createAd(this.getAdId(s.video),this.config.adSid)}BYTEDANCE_GAME&&u.default.init()},t.prototype.getSDKVersion=function(t){var e=t.getSystemInfoSync().SDKVersion;return e=e.replace(/\./g,""),parseInt(e)},t.prototype.updateConfig=function(t){t.bannerAd&&t.bannerAd.adUnitId.length>0&&(this.config.bannerAdId=t.bannerAd.adUnitId),t.boxBannerAd&&t.boxBannerAd.adUnitId.length>0&&(this.config.boxBannerAdId=t.boxBannerAd.adUnitId),t.interstitialAd&&t.interstitialAd.adUnitId.length>0&&(this.config.interstitialAdId=t.interstitialAd.adUnitId),t.nativeAd&&t.nativeAd.adUnitId.length>0&&(this.config.nativeAdId=t.nativeAd.adUnitId),t.videoAd&&t.videoAd.adUnitId.length>0&&(this.config.rewardedVideoAdId=t.videoAd.adUnitId),t.customAd&&t.customAd.adUnitId.length>0&&(this.config.customAdId=t.customAd.adUnitId),t.appBoxAd&&t.appBoxAd.adUnitId.length>0&&(this.config.appBoxAdId=t.appBoxAd.adUnitId)},t.prototype.isServerDataReady=function(){return a.default.success},t.prototype.getCustomData=function(){return y.default.customData},t.prototype.getAdvertData=function(){return y.default.advertData},t.prototype.getAdId=function(t){this.adIndex[t]||(this.adIndex[t]=0);var e=[];switch(t){case s.banner:e=this.config.bannerAdId;break;case s.boxBanner:e=this.config.boxBannerAdId;break;case s.video:e=this.config.rewardedVideoAdId;break;case s.native:e=this.config.nativeAdId;break;case s.custom:e=this.config.customAdId;break;case s.insert:e=this.config.interstitialAdId;break;case s.appbox:e=this.config.appBoxAdId}var i=e[this.adIndex[t]];return this.adIndex[t]++,this.adIndex[t]>=e.length&&(this.adIndex[t]=0),i},t.prototype.showBannerAd=function(t){l.default.inst.showAd(t||this.getAdId(s.banner),this.config.adSid)},t.prototype.hideBannerAd=function(t){void 0===t&&(t=!0),t?l.default.inst.closeAd():l.default.inst.hideAd()},t.prototype.moveBannerAd=function(t){void 0===t&&(t=0),l.default.inst.moveAd(t)},t.prototype.showBoxBannerAd=function(){d.default.showAd(this.getAdId(s.boxBanner))},t.prototype.hideBoxBannerAd=function(t){void 0===t&&(t=!0),t?d.default.closeAd():d.default.hideAd()},t.prototype.moveBoxBannerAd=function(t){d.default.moveAd(t)},t.prototype.showAppBoxAd=function(t,e){c.default.showAd(t,e||this.getAdId(s.appbox))},t.prototype.closeAppBoxAd=function(){c.default.closeAd()},t.prototype.showInterstitialAd=function(t,e){(e=e||this.getAdId(s.insert))&&p.default.showAd(t,e)},t.prototype.fetchNativeAdData=function(t,e){var i=e||this.getAdId(s.native),o=this.nativeAdModules[i];o||(o=new f.default,this.nativeAdModules[i]=o),o.create(i,t)},t.prototype.reportNativeAdShow=function(t){var e=this.nativeAdModules[t];e&&e.reportAdShow()},t.prototype.reportNativeAdClick=function(t){var e=this.nativeAdModules[t];e&&e.reportAdClick()},t.prototype.preloadNativeAd=function(t,e){var i=this;void 0===e&&(e=null),this.nativeAdDatas.has(t)||this.fetchNativeAdData(function(t){t&&(i.nativeAdDatas.set(t.adPositionId,t),e&&e())},t)},t.prototype.getNativeAdData=function(t){if(t||(t=this.nativeAdDatas.size>0?Array.from(this.nativeAdDatas.keys())[0]:""),t){var e=this.nativeAdDatas.get(t);if(e)return this.nativeAdDatas.delete(t),e}return null},t.prototype.showRewardedVideoAd=function(t){_.default.showAd(t)},t.prototype.showCustomAd=function(t,e){h.default.showAd(e||this.getAdId(s.custom),t)},t.prototype.hideCustomAd=function(){h.default.closeAd()},t.prototype.supportScreenRecording=function(){return BYTEDANCE_GAME&&u.default.supportScreenRecording()},t.prototype.isRecording=function(){return u.default.isRecording()},t.prototype.getRecordedVideoPath=function(){return u.default.getVideoPath()},t.prototype.startRecording=function(t,e){u.default.startRecording(t,e)},t.prototype.stopRecording=function(t){u.default.stopRecording(t)},t.prototype.pauseRecording=function(){u.default.pause()},t.prototype.resumeRecording=function(){u.default.resume()},t.prototype.recordClip=function(t){u.default.recordClip(t)},t.inst=new t,t}();n.default=v.inst,cc._RF.pop()},{}],PlatformShare:[function(t,e,i){"use strict";cc._RF.push(e,"c30f0pqh7tPxqSDel1XLW0t","PlatformShare");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0});var s=o("PlatformAd"),r=function(){function t(){}return t.prototype.simpleShare=function(t){window.qq?qq.shareAppMessage(t):window.wx?wx.shareAppMessage(t):window.tt?tt.shareAppMessage(t):window.qg&&qg.share&&qg.share({success:function(){console.log("share success")},fail:function(t){console.log("share fail:",t)},cancel:function(){console.log("share cancel")}})},t.prototype.supportShareAppMessage=function(){return!0},t.prototype.shareAppMessage=function(t){this.simpleShare(t)},t.prototype.supportShareVideo=function(){return s.default.supportScreenRecording()},t.prototype.shareVideo=function(t){var e,i,o,n=s.default.getRecordedVideoPath();n?(console.log("begin share video",n),null===(e=tt.shareAppMessage)||void 0===e||e.call(tt,{channel:"video",title:t.title,desc:t.desc,extra:{videoPath:n,videoTopics:null===(i=t.extra)||void 0===i?void 0:i.videoTopics,hashtag_list:null===(o=t.extra)||void 0===o?void 0:o.videoTopics},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),t.success&&t.success()},fail:function(e){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25",e),t.fail&&t.fail()}})):console.error("No video to share")},t.prototype.supportShowShareMenu=function(){return window.tt||window.qq||window.wx},t.prototype.showShareMenu=function(){window.qq?qq.showShareMenu({}):window.wx?wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}):window.tt&&tt.showShareMenu({})},t.prototype.hideShareMenu=function(){window.qq?qq.hideShareMenu({}):window.wx?wx.hideShareMenu({menus:["shareAppMessage","shareTimeline"]}):window.tt&&tt.hideShareMenu({})},t.inst=new t,t}();n.default=r.inst,cc._RF.pop()},{}],Pool:[function(t,e,i){"use strict";cc._RF.push(e,"f00f8mdOeNIHonir/iAPIsf","Pool");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0});var s=o("Tools"),r=function(){function t(){this.poolSize=0,this.prefab=null,this.nodePool=null,this.createNode=function(){return cc.instantiate(this.prefab)}}return t.create=function(e,i){var o=new t;return o.init(e,i),o},t.prototype.init=function(t,e){this.poolSize=e||250,this.prefab=t,s.default.isEmpty(this.nodePool)&&(this.nodePool=new cc.NodePool);for(var i=0;i<e;i++){var o=this.createNode();this.nodePool.put(o)}},t.prototype.resetPool=function(){for(var t=this.poolSize-this.nodePool.size(),e=0;e<t;e++){var i=this.createNode();this.nodePool.put(i)}},t.prototype.put=function(t){t.stopAllActions(),t.active=!1,this.nodePool.put(t)},t.prototype.get=function(){if(0==this.nodePool.size()){var t=this.createNode();this.nodePool.put(t)}return this.nodePool.get()},t.prototype.clear=function(){this.nodePool&&this.nodePool.clear()},t}();n.default=r,cc._RF.pop()},{}],RewardData:[function(t,e,i){"use strict";cc._RF.push(e,"9e6b8DET+hGB713nI7DLOu2","RewardData");var o=t,n=i,s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var r=o("MathUtils"),a=o("ResMgr"),c=o("Tools"),l=o("UserData"),d=function(){function t(){this.config={}}return t.prototype.loadConfig=function(){var t=this;a.default.loadRes("res/config/rewardCfg",cc.JsonAsset).then(function(e){for(var i in e.json)Object.prototype.hasOwnProperty.call(e.json,i)&&(t.config[i]=e.json[i])})},t.prototype.getRewards=function(t){for(var e=[],i=this.config[t.toString()],o=function(t){var o=i.reward[t],r=null;if(o.id)r=l.default.getPropConfigByID(o.id);else{var a=l.default.getPropConfigByItem(o.type);a=n.getPropConfigByRareType(o.rare,a),r=function t(){var i,o;r=a.getRandom();try{for(var n=(i=void 0,s(e)),l=n.next();!l.done;l=n.next())(l.value.propID==r.propID||r.hide)&&(r=t())}catch(c){i={error:c}}finally{try{l&&!l.done&&(o=n.return)&&o.call(n)}finally{if(i)throw i.error}}return r}()}var d=c.default.fromJson(r,new l.PropConfig);d&&(d.number=Math.floor(r.reward*o.times),e.push(d))},n=this,r=0;r<i.reward.length;r++)o(r);return e},t.prototype.getRandomReward=function(t){var e=r.default.randomInt(103,107),i=l.default.getPropConfigByItem(e).getRandom(),o=c.default.fromJson(i,new l.PropConfig);return o&&(o.number=Math.floor(i.reward*t)),o},t.prototype.getPropConfigByRareType=function(t,e){for(var i=[],o=0;o<e.length;o++)e[o].hide||-1!=t&&e[o].rare!=t||i.push(e[o]);return i},t.prototype.getLockPropConfig=function(t){for(var e=[],i=l.default.getLockProp(t),o=0;o<t;o++){var n,s=i[o];n=s?c.default.fromJson(l.default.getPropConfigByID(s.propID),new l.PropConfig):c.default.fromJson(l.default.getPropConfigByID("clock"),new l.PropConfig),e.push(n)}return e},t.inst=new t,t}();n.default=d.inst,cc._RF.pop()},{}],RewardedVideoModule:[function(t,e,i){"use strict";cc._RF.push(e,"9ec18mwI8JAQaqsjVKUuB8L","RewardedVideoModule");var o=t,n=i;Object.defineProperty(n,"__esModule",{value:!0});var s=o("Constants"),r=o("ShuFenReport"),a=o("AdDeclare"),c=function(){function t(){this.adPositionId="",this.appSid="",this.adObj=null,this.loaded=!1,this.adResultCallback=null}return t.prototype.createAd=function(t,e){var i,o=this;void 0===e&&(e=""),this.adPositionId=t,this.appSid=e,PLATFORM&&(console.log("RewardedVideoAd create: ",t),this.adObj=null===(i=null===PLATFORM||void 0===PLATFORM?void 0:PLATFORM.createRewardedVideoAd)||void 0===i?void 0:i.call(PLATFORM,{adUnitId:this.adPositionId,posId:this.adPositionId,appSid:e})),this.adObj&&(this.adObj.onLoad(this.onLoad_.bind(this)),this.adObj.onError(this.onError_.bind(this)),this.adObj.onClose(this.onClose_.bind(this)),setTimeout(function(){o.loaded||o.adObj.load()},7e3))},t.prototype.showAd=function(t){var e,i,o,n,c=this;this.adResultCallback=t,r.default.reportVideo(s.default.REPORT_ID,1),this.loaded?null===(i=(e=this.adObj).show)||void 0===i||i.call(e).then(function(){console.log("RewardedVideoAd show success."),r.default.reportVideo(s.default.REPORT_ID,2)}).catch(function(t){console.log("RewardedVideoAd show failed",t),c.adResultCallback&&(c.adResultCallback(a.AdResultState.ON_ERROR),c.adResultCallback=null)}):(null===(n=null===(o=this.adObj)||void 0===o?void 0:o.load)||void 0===n||n.call(o),this.adResultCallback&&(this.adResultCallback(a.AdResultState.ON_ERROR),this.adResultCallback=null))},t.prototype.onError_=function(t){console.log("RewardedVideoAd onError ",t?JSON.stringify(t):t),this.loaded=!1},t.prototype.onLoad_=function(){console.log("RewardedVideoAd onLoad"),this.loaded=!0},t.prototype.onClose_=function(t){var e=this;t&&t.isEnded||void 0===t?(console.log("RewardedVideoAd play finished."),this.adResultCallback&&(this.adResultCallback(a.AdResultState.ON_CLOSE_FINISH),this.adResultCallback=null),r.default.reportVideo(s.default.REPORT_ID,3)):(console.log("RewardedVideoAd user cancelled."),this.adResultCallback&&(this.adResultCallback(a.AdResultState.ON_CLOSE_CANCEL),this.adResultCallback=null)),this.loaded=!1,setTimeout(function(){e.loaded||e.adObj.load()},5e3)},t.inst=new t,t}();n.default=c.inst,cc._RF.pop()},{}],ServerData:[function(t,e,i){"use strict";cc._RF.push(e,"53c53Ecx6FA/7uFqAx35WsT","ServerData");var o,n=t,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(s,"__esModule",{value:!0}),s.SERVER_DATA_TYPE=void 0;var a,c=n("Constants"),l=n("NetCore"),d=n("Log"),h=n("PlatformAd");(function(t){t.CUSTOM="gameCustomData",t.ADVERT="gameAdvertData"})(a=s.SERVER_DATA_TYPE||(s.SERVER_DATA_TYPE={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.serverData="",e.adData="",e.serverDataReady=!1,e}return r(e,t),Object.defineProperty(e.prototype,"customData",{get:function(){return this.serverData?JSON.parse(this.serverData):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"advertData",{get:function(){return this.adData?JSON.parse(this.adData):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isServerDataReady",{get:function(){return this.serverDataReady},enumerable:!1,configurable:!0}),e.prototype.requestData=function(t,e){void 0===e&&(e=a.CUSTOM);var i=c.default.HTTP_PATH+"/"+t+"/"+e;this.get(e,i)},e.prototype.onHttpMessage=function(t,e,i){if(e){var o=JSON.parse(i);if(o&&o.status){var n=o.data.settingList[0];switch(t){case a.CUSTOM:this.serverDataReady=!0,this.serverData=n,cc.log("customData",n+"\n");break;case a.ADVERT:this.adData=n,h.default.updateConfig(this.advertData),cc.log("advertData",n+"\n")}}else d.default.d("\u83b7\u53d6\u6570\u636e\u5931\u8d25:",o.errorMessage)}else d.default.d("\u83b7\u53d6\u6570\u636e\u5931\u8d25:",i)},e.inst=new e,e}(l.default);s.default=u.inst,cc._RF.pop()},{}],ShareNode:[function(t,e,i){"use strict";cc._RF.push(e,"95732GT44lGdb88MKI+jX0b","ShareNode");var o,n=t,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(s,"__esModule",{value:!0});var c=n("MsgCache"),l=n("AdsManager"),d=cc._decorator,h=d.ccclass,u=d.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnShare=null,e.spRecording=null,e.callback=null,e.isShared=!1,e}return r(e,t),e.prototype.start=function(){this.btnShare.active=!0,this.spRecording.active=!1,cc.tween(this.btnShare).sequence(cc.scaleTo(1.5,.9),cc.scaleTo(1.5,1.1)).repeatForever().start()},e.prototype.init=function(t){this.callback=t},e.prototype.close=function(){this.callback&&this.callback(this.isShared),this.node.destroy()},e.prototype.share=function(){var t=this;l.default.shareVideo({success:function(){t.isShared=!0,t.close()},fail:function(){c.default.pushToast("\u5f55\u5c4f\u5206\u4eab\u5931\u8d25\uff01")}})},a([u(cc.Node)],e.prototype,"btnShare",void 0),a([u(cc.Node)],e.prototype,"spRecording",void 0),a([h],e)}(cc.Component);s.default=p,cc._RF.pop()},{}],Toast:[function(t,e,i){"use strict";cc._RF.push(e,"7afe7kYMKNAJaqrKDN9vJzA","Toast");var o,n=t,s=i,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(s,"__esModule",{value:!0});var c=n("MsgCache"),l=cc._decorator,d=l.ccclass,h=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.sprite=null,e.isShow=!1,e.time=0,e}return r(e,t),e.prototype.onLoad=function(){var t=this;this.label.node.on("size-changed",function(){var e=.8*cc.winSize.width;t.label.node.width>e&&cc.tween(t.label.node).delay(.02).call(function(){t.label.overflow=cc.Label.Overflow.RESIZE_HEIGHT,t.label.node.width=e}).start()},this)},e.prototype.hide=function(){this.time=-1,this.isShow=!1,this.label.string="",this.node.opacity=0},e.prototype.update=function(t){var e=this,i=c.default.getToastCount();if(this.isShow)-1!=this.time&&(this.time+=t),this.time>=.3&&i>0&&this.hide(),this.time>=2&&this.hide();else if(i>0){this.isShow=!0;var o=c.default.popToast();this.label.overflow=cc.Label.Overflow.NONE,this.label.string=o,this.node.opacity=255,this.node.zIndex=2,this.node.scale=.5,cc.tween(this.node).to(.3,{scale:1},{easing:"backOut"}).call(function(){e.time=0}).start()}},a([h(cc.Label)],e.prototype,"label",void 0),a([h(cc.Sprite)],e.prototype,"sprite",void 0),a([d],e)}(cc.Component);s.default=u,cc._RF.pop()},{}],TrapezoidSprite:[function(t,e,i){"use strict";cc._RF.push(e,"bc77dD4Iq9DHoIrYGUQXz/U","TrapezoidSprite");var o,n=i,s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==("undefined"==typeof Reflect?"undefined":typeof Reflect)&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,d=a.executeInEditMode,h=a.requireComponent,u=a.menu,p=cc.gfx,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.addCollider=!1,e.isosceles=!0,e.isLeft=!0,e._spriteFrame=null,e._topCenter=cc.v2(0,40),e._topWidth=50,e._bottomCenter=cc.v2(0,0),e._bottomWidth=50,e.renderer=null,e.mesh=null,e.collider=null,e}return s(e,t),Object.defineProperty(e.prototype,"spriteFrame",{get:function(){return this._spriteFrame},set:function(t){this._spriteFrame=t,this._refreshAll()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topCenter",{get:function(){return this._topCenter},set:function(t){this._topCenter=t,this._updateMesh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topWidth",{get:function(){return this._topWidth},set:function(t){this._topWidth=t,this._updateMesh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomCenter",{get:function(){return this._bottomCenter},set:function(t){this._bottomCenter=t,this._updateMesh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomWidth",{get:function(){return this._bottomWidth},set:function(t){this._bottomWidth=t,this._updateMesh()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.init()},e.prototype.init=function(){this.renderer||(this.renderer=this.node.getComponent(cc.MeshRenderer)||this.node.addComponent(cc.MeshRenderer),this.renderer.mesh=null),this.addCollider&&!this.collider&&(this.collider=this.node.getComponent(cc.PolygonCollider)||this.node.addComponent(cc.PolygonCollider))},e.prototype.onEnable=function(){this._refreshAll()},e.prototype.start=function(){},e.prototype._refreshAll=function(){this._updateMesh(),this._applySpriteFrame()},e.prototype._updateMesh=function(){var t;this.init(),this.mesh||(this.mesh=new cc.Mesh,this.mesh.init(new p.VertexFormat([{name:p.ATTR_POSITION,type:p.ATTR_TYPE_FLOAT32,num:2},{name:p.ATTR_UV0,type:p.ATTR_TYPE_FLOAT32,num:3},{name:p.ATTR_COLOR,type:p.ATTR_TYPE_UINT8,num:4,normalize:!0}]),4,!0)),t=this.isosceles?[cc.v3(-this.topWidth/2+this.topCenter.x,this.topCenter.y,0),cc.v3(-this.bottomWidth/2+this.bottomCenter.x,this.bottomCenter.y,0),cc.v3(this.topWidth/2+this.topCenter.x,this.topCenter.y,0),cc.v3(this.bottomWidth/2+this.topCenter.x,this.bottomCenter.y,0)]:this.isLeft?[cc.v3(-this.topWidth/2,this.topCenter.y,0),cc.v3(-this.bottomWidth/2,this.bottomCenter.y,0),cc.v3(this.topCenter.x,this.topCenter.y,0),cc.v3(this.topCenter.x,this.bottomCenter.y,0)]:[cc.v3(this.topCenter.x,this.topCenter.y,0),cc.v3(this.bottomCenter.x,this.bottomCenter.y,0),cc.v3(this.topWidth/2,this.topCenter.y,0),cc.v3(this.bottomWidth/2,this.bottomCenter.y,0)],this.mesh.setVertices(p.ATTR_POSITION,t);var e=cc.v2(t[0]),i=cc.v2(t[1]),o=cc.v2(t[2]),n=cc.v2(t[3]),s=(o.y-i.y)/(o.x-i.x),r=(e.y-n.y)/(e.x-n.x),a=(i.x*s-n.x*r+(n.y-i.y))/(s-r),c=cc.v2(a,s*a-i.x*s+i.y),l=cc.Vec2.distance(e,c),d=cc.Vec2.distance(i,c),h=cc.Vec2.distance(o,c),u=cc.Vec2.distance(n,c),f=(l+u)/u,_=(d+h)/h,y=(h+d)/d,v=(u+l)/l,m=[cc.v3(0,0,1),cc.v3(0,1,1),cc.v3(1,0,1),cc.v3(1,1,1)];m[0].mulSelf(f),m[1].mulSelf(_),m[2].mulSelf(y),m[3].mulSelf(v),m[0].z=m[0].z-1,m[1].z=m[1].z-1,m[2].z=m[2].z-1,m[3].z=m[3].z-1;var g=this.node.color,b=cc.color(g.r,g.g,g.b,255),A=[b,b,b,b];if(this.mesh.setVertices(p.ATTR_UV0,m),this.mesh.setVertices(p.ATTR_COLOR,A),this.mesh.setIndices([0,1,2,1,3,2]),this.renderer.mesh=this.mesh,this.addCollider&&this.collider){var w=cc.v2(t[0]),I=cc.v2(t[1]),O=cc.v2(t[2]),S=cc.v2(t[3]);this.isosceles?this.collider.points=[w,O,S,I]:this.isLeft?this.collider.points=[w,cc.v2(w.x+3,w.y),cc.v2(I.x+3,I.y),I]:this.collider.points=[cc.v2(O.x-3,O.y),O,S,cc.v2(S.x-3,S.y)]}},e.prototype._applySpriteFrame=function(){if(this.spriteFrame){var t=this.renderer.getMaterial(0),e=this.spriteFrame.getTexture();t.define("USE_TEXTURE",!0),t.setProperty("texture",e)}},r([l({tooltip:"\u662f\u5426\u9700\u8981\u751f\u6210\u78b0\u649e\u4f53"})],e.prototype,"addCollider",void 0),r([l({tooltip:"\u662f\u5426\u7b49\u8170\u68af\u5f62"})],e.prototype,"isosceles",void 0),r([l({visible:function(){return!this.isosceles},tooltip:"\u662f\u5426\u5de6\u534a\u90e8\u5206"})],e.prototype,"isLeft",void 0),r([l],e.prototype,"_spriteFrame",void 0),r([l({type:cc.SpriteFrame,tooltip:"\u7cbe\u7075\u7684\u7cbe\u7075\u5e27"})],e.prototype,"spriteFrame",null),r([l],e.prototype,"_topCenter",void 0),r([l({type:cc.Vec2,tooltip:"\u9876\u8fb9\u4e2d\u5fc3\u70b9\uff0c\u9ed8\u8ba4\u662f(0, 40)"})],e.prototype,"topCenter",null),r([l],e.prototype,"_topWidth",void 0),r([l({tooltip:"\u9876\u8fb9\u5bbd\u5ea6"})],e.prototype,"topWidth",null),r([l],e.prototype,"_bottomCenter",void 0),r([l({type:cc.Vec2,tooltip:"\u5e95\u8fb9\u4e2d\u5fc3\u70b9\uff0c\u9ed8\u8ba4\u662f(0, 0)"})],e.prototype,"bottomCenter",null),r([l],e.prototype,"_bottomWidth",void 0),r([l({tooltip:"\u5e95\u8fb9\u5bbd\u5ea6"})],e.prototype,"bottomWidth",null),r([c,d,h(cc.MeshRenderer),u("RenderUtils/TrapezoidSprite")],e)}(cc.Component);n.default=f,cc._RF.pop()},{}],UserData:[function(t,e,i){"use strict";cc._RF.push(e,"756c6YFRY5MnKaEIQYwJOH8","UserData");var o=t,n=i,s=function(t,e,i,o){return new(i||(i=Promise))(function(n,s){function r(t){try{c(o.next(t))}catch(e){s(e)}}function a(t){try{c(o.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,a)}c((o=o.apply(t,e||[])).next())})},r=function(t,e){var i,o,n,s,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return c([t,e])}}function c(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(n=2&s[0]?o.return:s[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,s[1])).done)return n;switch(o=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){r.label=s[1];break}if(6===s[0]&&r.label<n[1]){r.label=n[1],n=s;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(s);break}n[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(a){s=[6,a],o=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},a=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.Prop=n.PropConfig=n.SignInStatus=n.RARE_TYPE=void 0;var c,l=o("Constants"),d=o("ResMgr"),h=o("Tools"),u=o("MsgCache");(function(t){t[t.NORMAL=-1]="NORMAL",t[t.GENERAL=0]="GENERAL",t[t.RARE=1]="RARE",t[t.SUPER_RARE=2]="SUPER_RARE",t[t.EXTER_RARE=3]="EXTER_RARE"})(c=n.RARE_TYPE||(n.RARE_TYPE={})),function(t){t[t.NotLogin=0]="NotLogin",t[t.Login=1]="Login",t[t.Normal=2]="Normal",t[t.Video=4]="Video"}(n.SignInStatus||(n.SignInStatus={})),n.PropConfig=function(){this.propID="",this.propName="",this.hide=!1,this.lock=!1,this.needPay=!1,this.index=0,this.subIndex=0,this.number=0,this.rare=c.NORMAL,this.reward=0,this.price=0,this.coin=0,this.mp=0};var p=function(){function t(){this.propID="",this.propName="",this._number=0,this.infiniteTime=0,this.lock=!1,this._useNum=0}return Object.defineProperty(t.prototype,"number",{get:function(){return this._number},set:function(t){this._number=t,cc.director.emit("updateProp",this.propID)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useNum",{get:function(){return this._useNum},set:function(t){this._useNum<9999?this._useNum+=t:this._useNum=9999},enumerable:!1,configurable:!0}),t}();n.Prop=p;var f=l.default.IS_AD_SHOW?"SANDBOX_USERDATA_KEY":"SANDBOX_USERDATA_KEY_TEMP",_=l.default.IS_AD_SHOW?"SANDBOX_PROP_KEY":"SANDBOX_PROP_KEY_TEMP",y=function(){function t(){this.member={saved:!1,firstPlayTime:0,lastSignInTime:0,signInStatus:[0,0,0,0,0,0,0],signInDays:-1,onlineTime:0,onlineGuided:!1,mysteryNum:1,mysteryGuided:!1,cultureGuided:!1,useTimeScale:!1,videoCount:0,luckyWheelCount:0,unLockMap:[!0,!0,!1,!1,!1],unLockSave:[!0,!0],firstFreeProp:{},BoxGiftNum:{},usedProp:{usedAll:!1,list:[]},achievTotal:[!1,!1,!1,!1],brushUnlock:{},wxSceneId:{isCheck:!1,scene:1001},unLockAll:!1,dailyRewards:{},daySales:{},storeGift:{},unlockRace:["humans"],qqMysteryNum:{},qqBoxNum:{},qqGift:{},openid:"",session_key:"",buildCount:0},this.propConfig={},this.propList={},this.needSave=!1}return t.prototype.loadConfig=function(){return s(this,void 0,void 0,function(){return r(this,function(){return[2,d.default.loadRes("res/config/propCfg",cc.JsonAsset).then(function(t){for(var e in t.json)if(Object.prototype.hasOwnProperty.call(t.json,e)){var i=t.json[e];this.propConfig[i.propID]=i,this.propList[i.propID]=h.default.fromJson(i,new p),this.propList[i.propID]._number=i.number}this.load()}.bind(this))]})})},t.prototype.load=function(){var t=cc.sys.localStorage.getItem(_);if(t){var e=JSON.parse(t);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=e[i];if(this.propList[i])for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(this.propList[i][n]=o[n])}}var s=cc.sys.localStorage.getItem(f);if(s){for(var r in e=JSON.parse(s))Object.prototype.hasOwnProperty.call(e,r)&&(this.member[r]=e[r]);0==this.member.firstPlayTime&&(this.member.firstPlayTime=cc.sys.now(),this.save())}else this.member.firstPlayTime=cc.sys.now(),this.save();if(WECHAT_GAME&&!this.member.wxSceneId.isCheck){if(wx.getEnterOptionsSync){var a=wx.getEnterOptionsSync();this.member.wxSceneId.scene=a.scene,this.member.wxSceneId.isCheck=!0}this.save()}setInterval(function(){for(var t in this.needSave&&(cc.sys.localStorage.setItem(f,JSON.stringify(this.member)),cc.sys.localStorage.setItem(_,JSON.stringify(this.propList)),this.needSave=!1),this.propList){var e=this.propList[t];e.infiniteTime>0&&(e.infiniteTime--,0==e.infiniteTime&&(cc.director.emit("updateProp",e.propID),u.default.pushToast("\u65e0\u9650\u4f7f\u7528\u300a"+e.propName+"\u300b\u9053\u5177\u65f6\u95f4\u7ed3\u675f")))}}.bind(this),1e3)},t.prototype.save=function(){this.needSave=!0},t.prototype.getPropByID=function(t){return this.propList[t]},t.prototype.getUnLockProp=function(t){for(var e=new Set,i=Object.values(this.propList),o=0;o<i.length;o++){var n=i.getRandom();if(this.getPropConfigByID(n.propID).rare==c.NORMAL||n.lock||e.add(n),e.size>=t)break}return Array.from(e)},t.prototype.getLockProp=function(t){var e,i,o=[],n=Object.values(this.propList);try{for(var s=a(n),r=s.next();!r.done;r=s.next()){var c=r.value;if(c.lock&&(o.push(c),o.length>=t))break}}catch(h){e={error:h}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return o},t.prototype.getPropConfigByID=function(t){return this.propConfig[t]},t.prototype.getPropConfigByItem=function(t){var e=[];for(var i in this.propConfig)if(Object.prototype.hasOwnProperty.call(this.propConfig,i)){var o=this.propConfig[i];o.hide||1!=t&&o.index!=t||e.push(o)}return e},t.prototype.getAllVideoProp=function(){var t,e,i=Object.values(this.propList),o=[];try{for(var n=a(i),s=n.next();!s.done;s=n.next()){var r=s.value;this.getPropConfigByID(r.propID).rare!=c.NORMAL&&o.push(r)}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return o},t.inst=new t,t}();n.default=y.inst,cc._RF.pop()},{}]},{},["ANDROIDApi","AchievData","AdDeclare","AdTools","AdsManager","AppBoxAdModule","BannerAdModule","BoxBannerAdModule","Counter","CustomAdModule","Dialog","FestivityData","GameCommon","GamePopBase","GameScreenRecorder","GameTdd","GlobalNode","GuideView","InterstitialAdModule","List","ListItem","LoadLayer","LocalizedTextManager","MsgBox","MsgCache","NativeAdModule","NativeBanner","NativeInterstitialAd","PlatformAd","PlatformShare","Pool","RewardData","RewardedVideoModule","ServerData","ShareNode","Toast","TrapezoidSprite","UserData"]);